{"version":3,"sources":["fake","file:///C:/REPOS/monaco/vscode/src/vs/languages/handlebars/common/handlebarsTokenTypes.ts","file:///C:/REPOS/monaco/vscode/src/vs/languages/handlebars/common/handlebars.ts"],"names":[],"mappings":"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","file":"vs/languages/handlebars/common/handlebars.js","sourcesContent":["}).call(this);","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\n\r\nexport const EMBED = 'punctuation.expression.unescaped.handlebars';\r\nexport const EMBED_UNESCAPED = 'punctuation.expression.handlebars';\r\nexport const KEYWORD = 'keyword.helper.handlebars';\r\nexport const VARIABLE = 'variable.parameter.handlebars';","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\n\r\nimport modes = require('vs/editor/common/modes');\r\nimport htmlMode = require('vs/languages/html/common/html');\r\nimport handlebarsTokenTypes = require('vs/languages/handlebars/common/handlebarsTokenTypes');\r\nimport htmlWorker = require('vs/languages/html/common/htmlWorker');\r\nimport {IInstantiationService} from 'vs/platform/instantiation/common/instantiation';\r\nimport {IModeService} from 'vs/editor/common/services/modeService';\r\nimport {LanguageConfigurationRegistry, LanguageConfiguration} from 'vs/editor/common/modes/languageConfigurationRegistry';\r\nimport {createWordRegExp} from 'vs/editor/common/modes/abstractMode';\r\nimport {ILeavingNestedModeData} from 'vs/editor/common/modes/supports/tokenizationSupport';\r\nimport {IThreadService} from 'vs/platform/thread/common/thread';\r\nimport {wireCancellationToken} from 'vs/base/common/async';\r\n\r\nexport enum States {\r\n\tHTML,\r\n\tExpression,\r\n\tUnescapedExpression\r\n}\r\n\r\nexport class HandlebarsState extends htmlMode.State {\r\n\r\n\tconstructor(mode:modes.IMode,\r\n\t\tpublic kind:htmlMode.States,\r\n\t\tpublic handlebarsKind:States,\r\n\t\tpublic lastTagName:string,\r\n\t\tpublic lastAttributeName:string,\r\n\t\tpublic embeddedContentType:string,\r\n\t\tpublic attributeValueQuote:string,\r\n\t\tpublic attributeValue:string) {\r\n\r\n\t\tsuper(mode, kind, lastTagName, lastAttributeName, embeddedContentType, attributeValueQuote, attributeValue);\r\n\t}\r\n\r\n\tpublic makeClone(): HandlebarsState {\r\n\t\treturn new HandlebarsState(this.getMode(), this.kind, this.handlebarsKind, this.lastTagName, this.lastAttributeName, this.embeddedContentType, this.attributeValueQuote, this.attributeValue);\r\n\t}\r\n\r\n\tpublic equals(other:modes.IState):boolean {\r\n\t\tif (other instanceof HandlebarsState) {\r\n\t\t\treturn (\r\n\t\t\t\tsuper.equals(other)\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tpublic tokenize(stream:modes.IStream) : modes.ITokenizationResult {\r\n\t\tswitch(this.handlebarsKind) {\r\n\t\t\tcase States.HTML:\r\n\t\t\t\tif (stream.advanceIfString('{{{').length > 0) {\r\n\t\t\t\t\tthis.handlebarsKind = States.UnescapedExpression;\r\n\t\t\t\t\treturn { type: handlebarsTokenTypes.EMBED_UNESCAPED };\r\n\t\t\t\t}\r\n\t\t\t\telse if (stream.advanceIfString('{{').length > 0) {\r\n\t\t\t\t\tthis.handlebarsKind = States.Expression;\r\n\t\t\t\t\treturn { type: handlebarsTokenTypes.EMBED };\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase States.Expression:\r\n\t\t\tcase States.UnescapedExpression:\r\n\t\t\t\tif (this.handlebarsKind === States.Expression && stream.advanceIfString('}}').length > 0) {\r\n\t\t\t\t\tthis.handlebarsKind = States.HTML;\r\n\t\t\t\t\treturn { type: handlebarsTokenTypes.EMBED };\r\n\t\t\t\t}\r\n\t\t\t\telse if (this.handlebarsKind === States.UnescapedExpression &&stream.advanceIfString('}}}').length > 0) {\r\n\t\t\t\t\tthis.handlebarsKind = States.HTML;\r\n\t\t\t\t\treturn { type: handlebarsTokenTypes.EMBED_UNESCAPED };\r\n\t\t\t\t}\r\n\t\t\t\telse if(stream.skipWhitespace().length > 0) {\r\n\t\t\t\t\treturn { type: ''};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(stream.peek() === '#') {\r\n\t\t\t\t\tstream.advanceWhile(/^[^\\s}]/);\r\n\t\t\t\t\treturn { type: handlebarsTokenTypes.KEYWORD };\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(stream.peek() === '/') {\r\n\t\t\t\t\tstream.advanceWhile(/^[^\\s}]/);\r\n\t\t\t\t\treturn { type: handlebarsTokenTypes.KEYWORD };\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(stream.advanceIfString('else')) {\r\n\t\t\t\t\tvar next = stream.peek();\r\n\t\t\t\t\tif(next === ' ' || next === '\\t' || next === '}') {\r\n\t\t\t\t\t\treturn { type: handlebarsTokenTypes.KEYWORD };\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tstream.goBack(4);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(stream.advanceWhile(/^[^\\s}]/).length > 0) {\r\n\t\t\t\t\treturn { type: handlebarsTokenTypes.VARIABLE };\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\treturn super.tokenize(stream);\r\n\t}\r\n}\r\n\r\nexport class HandlebarsMode extends htmlMode.HTMLMode<htmlWorker.HTMLWorker> {\r\n\r\n\tpublic static LANG_CONFIG:LanguageConfiguration = {\r\n\t\twordPattern: createWordRegExp('#-?%'),\r\n\r\n\t\tcomments: {\r\n\t\t\tblockComment: ['<!--', '-->']\r\n\t\t},\r\n\r\n\t\tbrackets: [\r\n\t\t\t['<!--', '-->'],\r\n\t\t\t['{{', '}}']\r\n\t\t],\r\n\r\n\t\t__electricCharacterSupport: {\r\n\t\t\tembeddedElectricCharacters: ['*', '}', ']', ')']\r\n\t\t},\r\n\r\n\t\tautoClosingPairs: [\r\n\t\t\t{ open: '{', close: '}' },\r\n\t\t\t{ open: '[', close: ']' },\r\n\t\t\t{ open: '(', close: ')' },\r\n\t\t\t{ open: '\"', close: '\"' },\r\n\t\t\t{ open: '\\'', close: '\\'' }\r\n\t\t],\r\n\r\n\t\tsurroundingPairs: [\r\n\t\t\t{ open: '<', close: '>' },\r\n\t\t\t{ open: '\"', close: '\"' },\r\n\t\t\t{ open: '\\'', close: '\\'' }\r\n\t\t],\r\n\r\n\t\tonEnterRules: [\r\n\t\t\t{\r\n\t\t\t\tbeforeText: new RegExp(`<(?!(?:${htmlMode.EMPTY_ELEMENTS.join('|')}))(\\\\w[\\\\w\\\\d]*)([^/>]*(?!/)>)[^<]*$`, 'i'),\r\n\t\t\t\tafterText: /^<\\/(\\w[\\w\\d]*)\\s*>$/i,\r\n\t\t\t\taction: { indentAction: modes.IndentAction.IndentOutdent }\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tbeforeText: new RegExp(`<(?!(?:${htmlMode.EMPTY_ELEMENTS.join('|')}))(\\\\w[\\\\w\\\\d]*)([^/>]*(?!/)>)[^<]*$`, 'i'),\r\n\t\t\t\taction: { indentAction: modes.IndentAction.Indent }\r\n\t\t\t}\r\n\t\t],\r\n\t};\r\n\r\n\tconstructor(\r\n\t\tdescriptor:modes.IModeDescriptor,\r\n\t\t@IInstantiationService instantiationService: IInstantiationService,\r\n\t\t@IModeService modeService: IModeService,\r\n\t\t@IThreadService threadService: IThreadService\r\n\t) {\r\n\t\tsuper(descriptor, instantiationService, modeService, threadService);\r\n\t}\r\n\r\n\tprotected _registerSupports(): void {\r\n\t\tmodes.HoverProviderRegistry.register(this.getId(), {\r\n\t\t\tprovideHover: (model, position, token): Thenable<modes.Hover> => {\r\n\t\t\t\treturn wireCancellationToken(token, this._provideHover(model.uri, position));\r\n\t\t\t}\r\n\t\t}, true);\r\n\r\n\t\tmodes.ReferenceProviderRegistry.register(this.getId(), {\r\n\t\t\tprovideReferences: (model, position, context, token): Thenable<modes.Location[]> => {\r\n\t\t\t\treturn wireCancellationToken(token, this._provideReferences(model.uri, position, context));\r\n\t\t\t}\r\n\t\t}, true);\r\n\r\n\t\tmodes.SuggestRegistry.register(this.getId(), {\r\n\t\t\ttriggerCharacters: ['.', ':', '<', '\"', '=', '/'],\r\n\t\t\tshouldAutotriggerSuggest: true,\r\n\t\t\tprovideCompletionItems: (model, position, token): Thenable<modes.ISuggestResult[]> => {\r\n\t\t\t\treturn wireCancellationToken(token, this._provideCompletionItems(model.uri, position));\r\n\t\t\t}\r\n\t\t}, true);\r\n\r\n\t\tmodes.DocumentHighlightProviderRegistry.register(this.getId(), {\r\n\t\t\tprovideDocumentHighlights: (model, position, token): Thenable<modes.DocumentHighlight[]> => {\r\n\t\t\t\treturn wireCancellationToken(token, this._provideDocumentHighlights(model.uri, position));\r\n\t\t\t}\r\n\t\t}, true);\r\n\r\n\t\tmodes.LinkProviderRegistry.register(this.getId(), {\r\n\t\t\tprovideLinks: (model, token): Thenable<modes.ILink[]> => {\r\n\t\t\t\treturn wireCancellationToken(token, this._provideLinks(model.uri));\r\n\t\t\t}\r\n\t\t}, true);\r\n\r\n\t\tLanguageConfigurationRegistry.register(this.getId(), HandlebarsMode.LANG_CONFIG);\r\n\t}\r\n\r\n\tpublic getInitialState() : modes.IState {\r\n\t\treturn new HandlebarsState(this, htmlMode.States.Content, States.HTML, '', '', '', '', '');\r\n\t}\r\n\r\n\tpublic getLeavingNestedModeData(line:string, state:modes.IState):ILeavingNestedModeData {\r\n\t\tvar leavingNestedModeData = super.getLeavingNestedModeData(line, state);\r\n\t\tif (leavingNestedModeData) {\r\n\t\t\tleavingNestedModeData.stateAfterNestedMode = new HandlebarsState(this, htmlMode.States.Content, States.HTML, '', '', '', '', '');\r\n\t\t}\r\n\t\treturn leavingNestedModeData;\r\n\t}\r\n}\r\n"]}