{"version":3,"sources":["fake","file:///C:/REPOS/monaco/vscode/src/vs/languages/json/common/parser/jsonLocation.ts","file:///C:/REPOS/monaco/vscode/src/vs/base/common/http.ts","file:///C:/REPOS/monaco/vscode/src/vs/base/common/jsonFormatter.ts","file:///C:/REPOS/monaco/vscode/src/vs/languages/json/common/contributions/globPatternContribution.ts","file:///C:/REPOS/monaco/vscode/src/vs/languages/json/common/parser/jsonParser.ts","file:///C:/REPOS/monaco/vscode/src/vs/languages/json/common/jsonIntellisense.ts","file:///C:/REPOS/monaco/vscode/src/vs/languages/json/common/contributions/bowerJSONContribution.ts","file:///C:/REPOS/monaco/vscode/src/vs/languages/json/common/contributions/packageJSONContribution.ts","file:///C:/REPOS/monaco/vscode/src/vs/languages/json/common/contributions/projectJSONContribution.ts","file:///C:/REPOS/monaco/vscode/src/vs/languages/json/common/jsonSchemaService.ts","file:///C:/REPOS/monaco/vscode/src/vs/languages/json/common/jsonWorker.ts"],"names":[],"mappings":"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","file":"vs/languages/json/common/jsonWorker.js","sourcesContent":["}).call(this);","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\n\r\nexport class JSONLocation {\r\n\tprivate segments: string[];\r\n\r\n\tconstructor(segments: string[]) {\r\n\t\tthis.segments = segments;\r\n\t}\r\n\r\n\tpublic append(segment: string) : JSONLocation {\r\n\t\treturn new JSONLocation(this.segments.concat(segment));\r\n\t}\r\n\r\n\tpublic getSegments() {\r\n\t\treturn this.segments;\r\n\t}\r\n\r\n\tpublic matches(segments: string[]) {\r\n\t\tvar k = 0;\r\n\t\tfor (var i= 0; k < segments.length && i < this.segments.length; i++) {\r\n\t\t\tif (segments[k] === this.segments[i] || segments[k] === '*') {\r\n\t\t\t\tk++;\r\n\t\t\t} else if (segments[k] !== '**') {\r\n\t\t\t\treturn  false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn k === segments.length;\r\n\t}\r\n\r\n\tpublic toString() : string {\r\n\t\treturn '[' + this.segments.join('][') + ']';\r\n\t}\r\n}","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\n\r\nimport * as nls from 'vs/nls';\r\n\r\nexport interface IXHROptions {\r\n\ttype?:string;\r\n\turl?:string;\r\n\tuser?:string;\r\n\tpassword?:string;\r\n\tresponseType?:string;\r\n\theaders?:any;\r\n\ttimeout?: number;\r\n\tfollowRedirects?: number;\r\n\tdata?:any;\r\n}\r\n\r\nexport interface IXHRResponse {\r\n\tresponseText: string;\r\n\tstatus: number;\r\n\r\n\treadyState : number;\r\n\tgetResponseHeader: (header:string) => string;\r\n}\r\n\r\nexport function getErrorStatusDescription(status: number) : string {\r\n\tif (status < 400) {\r\n\t\treturn void 0;\r\n\t}\r\n\tswitch (status) {\r\n\t\tcase 400: return nls.localize('status.400', 'Bad request. The request cannot be fulfilled due to bad syntax.');\r\n\t\tcase 401: return nls.localize('status.401', 'Unauthorized. The server is refusing to respond.');\r\n\t\tcase 403: return nls.localize('status.403', 'Forbidden. The server is refusing to respond.');\r\n\t\tcase 404: return nls.localize('status.404', 'Not Found. The requested location could not be found.');\r\n\t\tcase 405: return nls.localize('status.405', 'Method not allowed. A request was made using a request method not supported by that location.');\r\n\t\tcase 406: return nls.localize('status.406', 'Not Acceptable. The server can only generate a response that is not accepted by the client.');\r\n\t\tcase 407: return nls.localize('status.407', 'Proxy Authentication Required. The client must first authenticate itself with the proxy.');\r\n\t\tcase 408: return nls.localize('status.408', 'Request Timeout. The server timed out waiting for the request.');\r\n\t\tcase 409: return nls.localize('status.409', 'Conflict. The request could not be completed because of a conflict in the request.');\r\n\t\tcase 410: return nls.localize('status.410', 'Gone. The requested page is no longer available.');\r\n\t\tcase 411: return nls.localize('status.411', 'Length Required. The \"Content-Length\" is not defined.');\r\n\t\tcase 412: return nls.localize('status.412', 'Precondition Failed. The precondition given in the request evaluated to false by the server.');\r\n\t\tcase 413: return nls.localize('status.413', 'Request Entity Too Large. The server will not accept the request, because the request entity is too large.');\r\n\t\tcase 414: return nls.localize('status.414', 'Request-URI Too Long. The server will not accept the request, because the URL is too long.');\r\n\t\tcase 415: return nls.localize('status.415', 'Unsupported Media Type. The server will not accept the request, because the media type is not supported.');\r\n\t\tcase 500: return nls.localize('status.500', 'Internal Server Error.');\r\n\t\tcase 501: return nls.localize('status.501', 'Not Implemented. The server either does not recognize the request method, or it lacks the ability to fulfill the request.');\r\n\t\tcase 503: return nls.localize('status.503', 'Service Unavailable. The server is currently unavailable (overloaded or down).');\r\n\t\tdefault: return nls.localize('status.416', 'HTTP status code {0}', status);\r\n\t}\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\n\r\nimport Json = require('./json');\r\n\r\nexport interface FormattingOptions {\r\n\t/**\r\n\t * If indentation is based on spaces (`insertSpaces` = true), then what is the number of spaces that make an indent?\r\n\t */\r\n\ttabSize: number;\r\n\t/**\r\n\t * Is indentation based on spaces?\r\n\t */\r\n\tinsertSpaces: boolean;\r\n\t/**\r\n\t * The default end of line line character\r\n\t */\r\n\teol: string;\r\n}\r\n\r\nexport interface Edit {\r\n\toffset: number;\r\n\tlength: number;\r\n\tcontent: string;\r\n}\r\n\r\nexport function applyEdit(text: string, edit: Edit) : string {\r\n\treturn text.substring(0, edit.offset) + edit.content + text.substring(edit.offset + edit.length);\r\n}\r\n\r\nexport function applyEdits(text: string, edits: Edit[]) : string {\r\n\tfor (let i = edits.length - 1; i >= 0; i--) {\r\n\t\ttext = applyEdit(text, edits[i]);\r\n\t}\r\n\treturn text;\r\n}\r\n\r\nexport function format(documentText: string, range: { offset: number, length: number}, options: FormattingOptions): Edit[] {\r\n\tlet initialIndentLevel: number;\r\n\tlet value: string;\r\n\tlet rangeStart: number;\r\n\tlet rangeEnd: number;\r\n\tif (range) {\r\n\t\trangeStart = range.offset;\r\n\t\trangeEnd = rangeStart + range.length;\r\n\t\twhile (rangeStart > 0 && !isEOL(documentText, rangeStart - 1)) {\r\n\t\t\trangeStart--;\r\n\t\t}\r\n\t\tlet scanner = Json.createScanner(documentText, true);\r\n\t\tscanner.setPosition(rangeEnd);\r\n\t\tscanner.scan();\r\n\t\trangeEnd = scanner.getPosition();\r\n\r\n\t\tvalue = documentText.substring(rangeStart, rangeEnd);\r\n\t\tinitialIndentLevel = computeIndentLevel(value, 0, options);\r\n\t} else {\r\n\t\tvalue = documentText;\r\n\t\trangeStart = 0;\r\n\t\trangeEnd = documentText.length;\r\n\t\tinitialIndentLevel = 0;\r\n\t}\r\n\tlet eol = getEOL(options, documentText);\r\n\r\n\tlet lineBreak = false;\r\n\tlet indentLevel = 0;\r\n\tlet indentValue: string;\r\n\tif (options.insertSpaces) {\r\n\t\tindentValue = repeat(' ', options.tabSize);\r\n\t} else {\r\n\t\tindentValue = '\\t';\r\n\t}\r\n\r\n\tlet scanner = Json.createScanner(value, false);\r\n\r\n\tfunction newLineAndIndent(): string {\r\n\t\treturn eol + repeat(indentValue, initialIndentLevel + indentLevel);\r\n\t}\r\n\tfunction scanNext(): Json.SyntaxKind {\r\n\t\tlet token = scanner.scan();\r\n\t\tlineBreak = false;\r\n\t\twhile (token === Json.SyntaxKind.Trivia || token === Json.SyntaxKind.LineBreakTrivia) {\r\n\t\t\tlineBreak = lineBreak || (token === Json.SyntaxKind.LineBreakTrivia);\r\n\t\t\ttoken = scanner.scan();\r\n\t\t}\r\n\t\treturn token;\r\n\t}\r\n\tlet editOperations: Edit[] = [];\r\n\tfunction addEdit(text: string, startOffset: number, endOffset: number) {\r\n\t\tif (documentText.substring(startOffset, endOffset) !== text) {\r\n\t\t\teditOperations.push({ offset: startOffset, length: endOffset - startOffset, content: text });\r\n\t\t}\r\n\t}\r\n\r\n\tlet firstToken = scanNext();\r\n\tif (firstToken !== Json.SyntaxKind.EOF) {\r\n\t\tlet firstTokenStart = scanner.getTokenOffset() + rangeStart;\r\n\t\tlet initialIndent = repeat(indentValue, initialIndentLevel);\r\n\t\taddEdit(initialIndent, rangeStart, firstTokenStart);\r\n\t}\r\n\r\n\twhile (firstToken !== Json.SyntaxKind.EOF) {\r\n\t\tlet firstTokenEnd = scanner.getTokenOffset() + scanner.getTokenLength() + rangeStart;\r\n\t\tlet secondToken = scanNext();\r\n\r\n\t\tlet replaceContent = '';\r\n\t\twhile (!lineBreak && (secondToken === Json.SyntaxKind.LineCommentTrivia || secondToken === Json.SyntaxKind.BlockCommentTrivia)) {\r\n\t\t\t// comments on the same line: keep them on the same line, but ignore them otherwise\r\n\t\t\tlet commentTokenStart = scanner.getTokenOffset() + rangeStart;\r\n\t\t\taddEdit(' ', firstTokenEnd, commentTokenStart);\r\n\t\t\tfirstTokenEnd = scanner.getTokenOffset() + scanner.getTokenLength() + rangeStart;\r\n\t\t\treplaceContent = secondToken === Json.SyntaxKind.LineCommentTrivia ? newLineAndIndent() : '';\r\n\t\t\tsecondToken = scanNext();\r\n\t\t}\r\n\r\n\t\tif (secondToken === Json.SyntaxKind.CloseBraceToken) {\r\n\t\t\tif (firstToken !== Json.SyntaxKind.OpenBraceToken) {\r\n\t\t\t\tindentLevel--;\r\n\t\t\t\treplaceContent = newLineAndIndent();\r\n\t\t\t}\r\n\t\t} else if (secondToken === Json.SyntaxKind.CloseBracketToken) {\r\n\t\t\tif (firstToken !== Json.SyntaxKind.OpenBracketToken) {\r\n\t\t\t\tindentLevel--;\r\n\t\t\t\treplaceContent = newLineAndIndent();\r\n\t\t\t}\r\n\t\t} else if (secondToken !== Json.SyntaxKind.EOF) {\r\n\t\t\tswitch (firstToken) {\r\n\t\t\t\tcase Json.SyntaxKind.OpenBracketToken:\r\n\t\t\t\tcase Json.SyntaxKind.OpenBraceToken:\r\n\t\t\t\t\tindentLevel++;\r\n\t\t\t\t\treplaceContent = newLineAndIndent();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase Json.SyntaxKind.CommaToken:\r\n\t\t\t\tcase Json.SyntaxKind.LineCommentTrivia:\r\n\t\t\t\t\treplaceContent = newLineAndIndent();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase Json.SyntaxKind.BlockCommentTrivia:\r\n\t\t\t\t\tif (lineBreak) {\r\n\t\t\t\t\t\treplaceContent = newLineAndIndent();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// symbol following comment on the same line: keep on same line, separate with ' '\r\n\t\t\t\t\t\treplaceContent = ' ';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase Json.SyntaxKind.ColonToken:\r\n\t\t\t\t\treplaceContent = ' ';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase Json.SyntaxKind.NullKeyword:\r\n\t\t\t\tcase Json.SyntaxKind.TrueKeyword:\r\n\t\t\t\tcase Json.SyntaxKind.FalseKeyword:\r\n\t\t\t\tcase Json.SyntaxKind.NumericLiteral:\r\n\t\t\t\t\tif (secondToken === Json.SyntaxKind.NullKeyword || secondToken === Json.SyntaxKind.FalseKeyword || secondToken === Json.SyntaxKind.NumericLiteral) {\r\n\t\t\t\t\t\treplaceContent = ' ';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (lineBreak && (secondToken === Json.SyntaxKind.LineCommentTrivia || secondToken === Json.SyntaxKind.BlockCommentTrivia)) {\r\n\t\t\t\treplaceContent = newLineAndIndent();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tlet secondTokenStart = scanner.getTokenOffset() + rangeStart;\r\n\t\taddEdit(replaceContent, firstTokenEnd, secondTokenStart);\r\n\t\tfirstToken = secondToken;\r\n\t}\r\n\treturn editOperations;\r\n}\r\n\r\nfunction repeat(s: string, count: number): string {\r\n\tlet result = '';\r\n\tfor (let i = 0; i < count; i++) {\r\n\t\tresult += s;\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nfunction computeIndentLevel(content: string, offset: number, options: FormattingOptions): number {\r\n\tlet i = 0;\r\n\tlet nChars = 0;\r\n\tlet tabSize = options.tabSize || 4;\r\n\twhile (i < content.length) {\r\n\t\tlet ch = content.charAt(i);\r\n\t\tif (ch === ' ') {\r\n\t\t\tnChars++;\r\n\t\t} else if (ch === '\\t') {\r\n\t\t\tnChars += tabSize;\r\n\t\t} else {\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\ti++;\r\n\t}\r\n\treturn Math.floor(nChars / tabSize);\r\n}\r\n\r\nfunction getEOL(options: FormattingOptions, text: string): string {\r\n\tfor (let i = 0; i < text.length; i++) {\r\n\t\tlet ch = text.charAt(i);\r\n\t\tif (ch === '\\r') {\r\n\t\t\tif (i + 1 < text.length && text.charAt(i+1) === '\\n') {\r\n\t\t\t\treturn '\\r\\n';\r\n\t\t\t}\r\n\t\t\treturn '\\r';\r\n\t\t} else if (ch === '\\n') {\r\n\t\t\treturn '\\n';\r\n\t\t}\r\n\t}\r\n\treturn (options && options.eol) || '\\n';\r\n}\r\n\r\nfunction isEOL(text: string, offset: number) {\r\n\treturn '\\r\\n'.indexOf(text.charAt(offset)) !== -1;\r\n}","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\n\r\nimport HtmlContent = require('vs/base/common/htmlContent');\r\nimport Strings = require('vs/base/common/strings');\r\nimport Modes = require('vs/editor/common/modes');\r\nimport WinJS = require('vs/base/common/winjs.base');\r\nimport nls = require('vs/nls');\r\nimport JSONWorker = require('vs/languages/json/common/jsonWorker');\r\nimport URI from 'vs/base/common/uri';\r\nimport {JSONLocation} from 'vs/languages/json/common/parser/jsonLocation';\r\n\r\nvar globProperties:Modes.ISuggestion[] = [\r\n\t{ type: 'value', label: nls.localize('fileLabel', \"Files by Extension\"), codeSnippet: '\"**/*.{{extension}}\": true', documentationLabel: nls.localize('fileDescription', \"Match all files of a specific file extension.\")},\r\n\t{ type: 'value', label: nls.localize('filesLabel', \"Files with Multiple Extensions\"), codeSnippet: '\"**/*.{ext1,ext2,ext3}\": true', documentationLabel: nls.localize('filesDescription', \"Match all files with any of the file extensions.\")},\r\n\t{ type: 'value', label: nls.localize('derivedLabel', \"Files with Siblings by Name\"), codeSnippet: '\"**/*.{{source-extension}}\": { \"when\": \"$(basename).{{target-extension}}\" }', documentationLabel: nls.localize('derivedDescription', \"Match files that have siblings with the same name but a different extension.\")},\r\n\t{ type: 'value', label: nls.localize('topFolderLabel', \"Folder by Name (Top Level)\"), codeSnippet: '\"{{name}}\": true', documentationLabel: nls.localize('topFolderDescription', \"Match a top level folder with a specific name.\")},\r\n\t{ type: 'value', label: nls.localize('topFoldersLabel', \"Folders with Multiple Names (Top Level)\"), codeSnippet: '\"{folder1,folder2,folder3}\": true', documentationLabel: nls.localize('topFoldersDescription', \"Match multiple top level folders.\")},\r\n\t{ type: 'value', label: nls.localize('folderLabel', \"Folder by Name (Any Location)\"), codeSnippet: '\"**/{{name}}\": true', documentationLabel: nls.localize('folderDescription', \"Match a folder with a specific name in any location.\")},\r\n];\r\n\r\nvar globValues:Modes.ISuggestion[] = [\r\n\t{ type: 'value', label: nls.localize('trueLabel', \"True\"), codeSnippet: 'true', documentationLabel: nls.localize('trueDescription', \"Enable the pattern.\")},\r\n\t{ type: 'value', label: nls.localize('falseLabel', \"False\"), codeSnippet: 'false', documentationLabel: nls.localize('falseDescription', \"Disable the pattern.\")},\r\n\t{ type: 'value', label: nls.localize('derivedLabel', \"Files with Siblings by Name\"), codeSnippet: '{ \"when\": \"$(basename).{{extension}}\" }', documentationLabel: nls.localize('siblingsDescription', \"Match files that have siblings with the same name but a different extension.\")}\r\n];\r\n\r\nexport class GlobPatternContribution implements JSONWorker.IJSONWorkerContribution {\r\n\r\n\tconstructor() {\r\n\t}\r\n\r\n\tprivate isSettingsFile(resource: URI): boolean {\r\n\t\tvar path = resource.path;\r\n\t\treturn Strings.endsWith(path, '/settings.json');\r\n\t}\r\n\r\n\tpublic collectDefaultSuggestions(resource: URI, result: JSONWorker.ISuggestionsCollector): WinJS.Promise {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic collectPropertySuggestions(resource: URI, location: JSONLocation, currentWord: string, addValue: boolean, isLast:boolean, result: JSONWorker.ISuggestionsCollector) : WinJS.Promise {\r\n\t\tif (this.isSettingsFile(resource) && (location.matches(['files.exclude']) || location.matches(['search.exclude']))) {\r\n\r\n\t\t\tglobProperties.forEach((e) => result.add(e));\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic collectValueSuggestions(resource: URI, location: JSONLocation, currentKey: string, result: JSONWorker.ISuggestionsCollector): WinJS.Promise {\r\n\t\tif (this.isSettingsFile(resource) && (location.matches(['files.exclude']) || location.matches(['search.exclude']))) {\r\n\r\n\t\t\tglobValues.forEach((e) => result.add(e));\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic getInfoContribution(resource: URI, location: JSONLocation): WinJS.TPromise<HtmlContent.IHTMLContentElement[]> {\r\n\t\treturn null;\r\n\t}\r\n}","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\n\r\nimport nls = require('vs/nls');\r\nimport Arrays = require('vs/base/common/arrays');\r\nimport Types = require('vs/base/common/types');\r\nimport Json = require('vs/base/common/json');\r\nimport JsonSchema = require('vs/base/common/jsonSchema');\r\nimport {JSONLocation} from './jsonLocation';\r\n\r\nexport interface IRange {\r\n\tstart:number;\r\n\tend:number;\r\n}\r\n\r\nexport interface IError {\r\n\tlocation:IRange;\r\n\tmessage:string;\r\n}\r\n\r\nexport class ASTNode {\r\n\tpublic start:number;\r\n\tpublic end:number;\r\n\tpublic type:string;\r\n\tpublic parent:ASTNode;\r\n\tpublic name:string;\r\n\r\n\tconstructor(parent:ASTNode, type:string, name:string, start:number, end?:number) {\r\n\t\tthis.type = type;\r\n\t\tthis.name = name;\r\n\t\tthis.start = start;\r\n\t\tthis.end = end;\r\n\t\tthis.parent = parent;\r\n\t}\r\n\r\n\tpublic getNodeLocation(): JSONLocation {\r\n\t\tvar path = this.parent ? this.parent.getNodeLocation() : new JSONLocation([]);\r\n\t\tif (this.name) {\r\n\t\t\tpath = path.append(this.name);\r\n\t\t}\r\n\t\treturn path;\r\n\t}\r\n\r\n\r\n\tpublic getChildNodes(): ASTNode[] {\r\n\t\treturn [];\r\n\t}\r\n\r\n\tpublic getValue():any {\r\n\t\t// override in children\r\n\t\treturn;\r\n\t}\r\n\r\n\tpublic contains(offset:number, includeRightBound: boolean = false) : boolean {\r\n\t\treturn offset >= this.start && offset < this.end || includeRightBound && offset === this.end;\r\n\t}\r\n\r\n\tpublic visit(visitor: (node:ASTNode) => boolean):boolean {\r\n\t\treturn visitor(this);\r\n\t}\r\n\r\n\tpublic getNodeFromOffset(offset:number):ASTNode {\r\n\t\tvar findNode = (node: ASTNode) : ASTNode => {\r\n\t\t\tif (offset >= node.start && offset < node.end) {\r\n\t\t\t\tvar children = node.getChildNodes();\r\n\t\t\t\tfor (var i = 0; i < children.length && children[i].start <= offset; i++) {\r\n\t\t\t\t\tvar item = findNode(children[i]);\r\n\t\t\t\t\tif (item) {\r\n\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn node;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t};\r\n\t\treturn findNode(this);\r\n\t}\r\n\r\n\tpublic getNodeFromOffsetEndInclusive(offset:number):ASTNode {\r\n\t\tvar findNode = (node: ASTNode) : ASTNode => {\r\n\t\t\tif (offset >= node.start && offset <= node.end) {\r\n\t\t\t\tvar children = node.getChildNodes();\r\n\t\t\t\tfor (var i = 0; i < children.length && children[i].start <= offset; i++) {\r\n\t\t\t\t\tvar item = findNode(children[i]);\r\n\t\t\t\t\tif (item) {\r\n\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn node;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t};\r\n\t\treturn findNode(this);\r\n\t}\r\n\r\n\tpublic validate(schema:JsonSchema.IJSONSchema, validationResult:ValidationResult, matchingSchemas:IApplicableSchema[], offset:number = -1) : void {\r\n\t\tif (offset !== -1 && !this.contains(offset)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (Array.isArray(schema.type)) {\r\n\t\t\tif (Arrays.contains(<string[]> schema.type, this.type) === false) {\r\n\t\t\t\tvalidationResult.warnings.push({\r\n\t\t\t\t\tlocation: { start: this.start, end: this.end },\r\n\t\t\t\t\tmessage: schema.errorMessage || nls.localize('typeArrayMismatchWarning', 'Incorrect type. Expected one of {0}', (<string[]> schema.type).join())\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (schema.type) {\r\n\t\t\tif (this.type !== schema.type) {\r\n\t\t\t\tvalidationResult.warnings.push({\r\n\t\t\t\t\tlocation: { start: this.start, end: this.end },\r\n\t\t\t\t\tmessage: schema.errorMessage || nls.localize('typeMismatchWarning', 'Incorrect type. Expected \"{0}\"', schema.type)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (Array.isArray(schema.allOf)) {\r\n\t\t\tschema.allOf.forEach((subSchema) => {\r\n\t\t\t\tthis.validate(subSchema, validationResult, matchingSchemas, offset);\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (schema.not) {\r\n\t\t\tvar subValidationResult = new ValidationResult();\r\n\t\t\tvar subMatchingSchemas : IApplicableSchema[] = [];\r\n\t\t\tthis.validate(schema.not, subValidationResult, subMatchingSchemas, offset);\r\n\t\t\tif (!subValidationResult.hasErrors()) {\r\n\t\t\t\tvalidationResult.warnings.push({\r\n\t\t\t\t\tlocation: { start: this.start, end: this.end },\r\n\t\t\t\t\tmessage: nls.localize('notSchemaWarning', \"Matches a schema that is not allowed.\")\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (matchingSchemas) {\r\n\t\t\t\tsubMatchingSchemas.forEach((ms) => {\r\n\t\t\t\t\tms.inverted = !ms.inverted;\r\n\t\t\t\t\tmatchingSchemas.push(ms);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar testAlternatives = (alternatives: JsonSchema.IJSONSchema[], maxOneMatch: boolean) => {\r\n\t\t\tvar matches = [];\r\n\r\n\t\t\t// remember the best match that is used for error messages\r\n\t\t\tvar bestMatch : { schema:JsonSchema.IJSONSchema; validationResult:ValidationResult; matchingSchemas:IApplicableSchema[]; } = null;\r\n\t\t\talternatives.forEach((subSchema) => {\r\n\t\t\t\tvar subValidationResult = new ValidationResult();\r\n\t\t\t\tvar subMatchingSchemas : IApplicableSchema[] = [];\r\n\t\t\t\tthis.validate(subSchema, subValidationResult, subMatchingSchemas);\r\n\t\t\t\tif (!subValidationResult.hasErrors()) {\r\n\t\t\t\t\tmatches.push(subSchema);\r\n\t\t\t\t}\r\n\t\t\t\tif (!bestMatch) {\r\n\t\t\t\t\tbestMatch = { schema: subSchema, validationResult: subValidationResult, matchingSchemas: subMatchingSchemas };\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!maxOneMatch && !subValidationResult.hasErrors() && !bestMatch.validationResult.hasErrors()) {\r\n\t\t\t\t\t\t// no errors, both are equally good matches\r\n\t\t\t\t\t\tbestMatch.matchingSchemas.push.apply(bestMatch.matchingSchemas, subMatchingSchemas);\r\n\t\t\t\t\t\tbestMatch.validationResult.propertiesMatches += subValidationResult.propertiesMatches;\r\n\t\t\t\t\t\tbestMatch.validationResult.propertiesValueMatches += subValidationResult.propertiesValueMatches;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar compareResult = subValidationResult.compare(bestMatch.validationResult);\r\n\t\t\t\t\t\tif (compareResult > 0) {\r\n\t\t\t\t\t\t\t// our node is the best matching so far\r\n\t\t\t\t\t\t\tbestMatch = { schema: subSchema, validationResult: subValidationResult,  matchingSchemas: subMatchingSchemas };\r\n\t\t\t\t\t\t} else if (compareResult === 0) {\r\n\t\t\t\t\t\t\t// there's already a best matching but we are as good\r\n\t\t\t\t\t\t\tbestMatch.matchingSchemas.push.apply(bestMatch.matchingSchemas, subMatchingSchemas);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (matches.length > 1 && maxOneMatch) {\r\n\t\t\t\tvalidationResult.warnings.push({\r\n\t\t\t\t\tlocation: { start: this.start, end: this.start + 1 },\r\n\t\t\t\t\tmessage: nls.localize('oneOfWarning', \"Matches multiple schemas when only one must validate.\")\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (bestMatch !== null) {\r\n\t\t\t\tvalidationResult.merge(bestMatch.validationResult);\r\n\t\t\t\tvalidationResult.propertiesMatches += bestMatch.validationResult.propertiesMatches;\r\n\t\t\t\tvalidationResult.propertiesValueMatches += bestMatch.validationResult.propertiesValueMatches;\r\n\t\t\t\tif (matchingSchemas) {\r\n\t\t\t\t\tmatchingSchemas.push.apply(matchingSchemas, bestMatch.matchingSchemas);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn matches.length;\r\n\t\t};\r\n\t\tif (Array.isArray(schema.anyOf)) {\r\n\t\t\ttestAlternatives(schema.anyOf, false);\r\n\t\t}\r\n\t\tif (Array.isArray(schema.oneOf)) {\r\n\t\t\ttestAlternatives(schema.oneOf, true);\r\n\t\t}\r\n\r\n\t\tif (Array.isArray(schema.enum)) {\r\n\t\t\tif (Arrays.contains(schema.enum, this.getValue()) === false) {\r\n\t\t\t\tvalidationResult.warnings.push({\r\n\t\t\t\t\tlocation: { start: this.start, end: this.end },\r\n\t\t\t\t\tmessage: nls.localize('enumWarning', 'Value is not an accepted value. Valid values: {0}', JSON.stringify(schema.enum))\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tvalidationResult.enumValueMatch = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (matchingSchemas !== null) {\r\n\t\t\tmatchingSchemas.push({node:this, schema: schema });\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class NullASTNode extends ASTNode {\r\n\r\n\tconstructor(parent:ASTNode, name:string, start:number, end?:number) {\r\n\t\tsuper(parent, 'null', name, start, end);\r\n\t}\r\n\r\n\tpublic getValue():any {\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nexport class BooleanASTNode extends ASTNode {\r\n\r\n\tprivate value:boolean;\r\n\r\n\tconstructor(parent:ASTNode, name:string, value:boolean, start:number, end?:number) {\r\n\t\tsuper(parent, 'boolean', name, start, end);\r\n\t\tthis.value = value;\r\n\t}\r\n\r\n\tpublic getValue():any {\r\n\t\treturn this.value;\r\n\t}\r\n\r\n}\r\n\r\nexport class ArrayASTNode extends ASTNode {\r\n\r\n\tpublic items:ASTNode[];\r\n\r\n\tconstructor(parent:ASTNode, name:string, start:number, end?:number) {\r\n\t\tsuper(parent, 'array', name, start, end);\r\n\t\tthis.items = [];\r\n\t}\r\n\r\n\tpublic getChildNodes(): ASTNode[] {\r\n\t\treturn this.items;\r\n\t}\r\n\r\n\tpublic getValue():any {\r\n\t\treturn this.items.map((v) => v.getValue());\r\n\t}\r\n\r\n\tpublic addItem(item: ASTNode) : boolean {\r\n\t\tif (item) {\r\n\t\t\tthis.items.push(item);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tpublic visit(visitor: (node:ASTNode) => boolean):boolean {\r\n\t\tvar ctn = visitor(this);\r\n\t\tfor (var i = 0; i < this.items.length && ctn; i++) {\r\n\t\t\tctn = this.items[i].visit(visitor);\r\n\t\t}\r\n\t\treturn ctn;\r\n\t}\r\n\r\n\tpublic validate(schema:JsonSchema.IJSONSchema, validationResult:ValidationResult, matchingSchemas:IApplicableSchema[], offset:number = -1):void {\r\n\t\tif (offset !== -1 && !this.contains(offset)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsuper.validate(schema, validationResult, matchingSchemas, offset);\r\n\r\n\t\tif (Array.isArray(schema.items)) {\r\n\t\t\tvar subSchemas = <JsonSchema.IJSONSchema[]> schema.items;\r\n\t\t\tsubSchemas.forEach((subSchema, index) => {\r\n\t\t\t\tvar itemValidationResult = new ValidationResult();\r\n\t\t\t\tvar item = this.items[index];\r\n\t\t\t\tif (item) {\r\n\t\t\t\t\titem.validate(subSchema, itemValidationResult, matchingSchemas, offset);\r\n\t\t\t\t\tvalidationResult.mergePropertyMatch(itemValidationResult);\r\n\t\t\t\t} else if (this.items.length >= subSchemas.length) {\r\n\t\t\t\t\tvalidationResult.propertiesValueMatches++;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (schema.additionalItems === false && this.items.length > subSchemas.length) {\r\n\t\t\t\tvalidationResult.warnings.push({\r\n\t\t\t\t\tlocation: { start: this.start, end: this.end },\r\n\t\t\t\t\tmessage: nls.localize('additionalItemsWarning', 'Array has too many items according to schema. Expected {0} or fewer', subSchemas.length)\r\n\t\t\t\t});\r\n\t\t\t} else if (this.items.length >= subSchemas.length) {\r\n\t\t\t\tvalidationResult.propertiesValueMatches += (this.items.length - subSchemas.length);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (schema.items) {\r\n\t\t\tthis.items.forEach((item) => {\r\n\t\t\t\tvar itemValidationResult = new ValidationResult();\r\n\t\t\t\titem.validate(schema.items, itemValidationResult, matchingSchemas, offset);\r\n\t\t\t\tvalidationResult.mergePropertyMatch(itemValidationResult);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (schema.minItems && this.items.length < schema.minItems) {\r\n\t\t\tvalidationResult.warnings.push({\r\n\t\t\t\tlocation: { start: this.start, end: this.end },\r\n\t\t\t\tmessage: nls.localize('minItemsWarning', 'Array has too few items. Expected {0} or more', schema.minItems)\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (schema.maxItems && this.items.length > schema.maxItems) {\r\n\t\t\tvalidationResult.warnings.push({\r\n\t\t\t\tlocation: { start: this.start, end: this.end },\r\n\t\t\t\tmessage: nls.localize('maxItemsWarning', 'Array has too many items. Expected {0} or fewer', schema.minItems)\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (schema.uniqueItems === true) {\r\n\t\t\tvar values = this.items.map((node) => {\r\n\t\t\t\treturn node.getValue();\r\n\t\t\t});\r\n\t\t\tvar duplicates = values.some((value, index) => {\r\n\t\t\t\treturn index !== values.lastIndexOf(value);\r\n\t\t\t});\r\n\t\t\tif (duplicates) {\r\n\t\t\t\tvalidationResult.warnings.push({\r\n\t\t\t\t\tlocation: { start: this.start, end: this.end },\r\n\t\t\t\t\tmessage: nls.localize('uniqueItemsWarning', 'Array has duplicate items')\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class NumberASTNode extends ASTNode {\r\n\r\n\tpublic isInteger:boolean;\r\n\tpublic value:number;\r\n\r\n\tconstructor(parent:ASTNode, name:string, start:number, end?:number) {\r\n\t\tsuper(parent, 'number', name, start, end);\r\n\t\tthis.isInteger = true;\r\n\t\tthis.value = Number.NaN;\r\n\t}\r\n\r\n\tpublic getValue():any {\r\n\t\treturn this.value;\r\n\t}\r\n\r\n\tpublic validate(schema:JsonSchema.IJSONSchema, validationResult:ValidationResult, matchingSchemas:IApplicableSchema[], offset:number = -1):void {\r\n\t\tif (offset !== -1 && !this.contains(offset)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// work around type validation in the base class\r\n\t\tvar typeIsInteger = false;\r\n\t\tif (schema.type === 'integer' || (Array.isArray(schema.type) && Arrays.contains(<string[]> schema.type, 'integer'))) {\r\n\t\t\ttypeIsInteger = true;\r\n\t\t}\r\n\t\tif (typeIsInteger && this.isInteger === true) {\r\n\t\t\tthis.type = 'integer';\r\n\t\t}\r\n\t\tsuper.validate(schema, validationResult, matchingSchemas, offset);\r\n\t\tthis.type = 'number';\r\n\r\n\t\tvar val = this.getValue();\r\n\r\n\t\tif (Types.isNumber(schema.multipleOf)) {\r\n\t\t\tif (val % schema.multipleOf !== 0) {\r\n\t\t\t\tvalidationResult.warnings.push({\r\n\t\t\t\t\tlocation: { start: this.start, end: this.end },\r\n\t\t\t\t\tmessage: nls.localize('multipleOfWarning', 'Value is not divisible by {0}', schema.multipleOf)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!Types.isUndefined(schema.minimum)) {\r\n\t\t\tif (schema.exclusiveMinimum && val <= schema.minimum) {\r\n\t\t\t\tvalidationResult.warnings.push({\r\n\t\t\t\t\tlocation: { start: this.start, end: this.end },\r\n\t\t\t\t\tmessage: nls.localize('exclusiveMinimumWarning', 'Value is below the exclusive minimum of {0}', schema.minimum)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (!schema.exclusiveMinimum && val < schema.minimum) {\r\n\t\t\t\tvalidationResult.warnings.push({\r\n\t\t\t\t\tlocation: { start: this.start, end: this.end },\r\n\t\t\t\t\tmessage: nls.localize('minimumWarning', 'Value is below the minimum of {0}', schema.minimum)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!Types.isUndefined(schema.maximum)) {\r\n\t\t\tif (schema.exclusiveMaximum && val >= schema.maximum) {\r\n\t\t\t\tvalidationResult.warnings.push({\r\n\t\t\t\t\tlocation: { start: this.start, end: this.end },\r\n\t\t\t\t\tmessage: nls.localize('exclusiveMaximumWarning', 'Value is above the exclusive maximum of {0}', schema.maximum)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (!schema.exclusiveMaximum && val > schema.maximum) {\r\n\t\t\t\tvalidationResult.warnings.push({\r\n\t\t\t\t\tlocation: { start: this.start, end: this.end },\r\n\t\t\t\t\tmessage: nls.localize('maximumWarning', 'Value is above the maximum of {0}', schema.maximum)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n}\r\n\r\nexport class StringASTNode extends ASTNode {\r\n\tpublic isKey:boolean;\r\n\tpublic value:string;\r\n\r\n\tconstructor(parent:ASTNode, name:string, isKey:boolean, start:number, end?:number) {\r\n\t\tsuper(parent, 'string', name, start, end);\r\n\t\tthis.isKey = isKey;\r\n\t\tthis.value = '';\r\n\t}\r\n\r\n\tpublic getValue():any {\r\n\t\treturn this.value;\r\n\t}\r\n\r\n\tpublic validate(schema:JsonSchema.IJSONSchema, validationResult:ValidationResult, matchingSchemas:IApplicableSchema[], offset:number = -1):void {\r\n\t\tif (offset !== -1 && !this.contains(offset)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsuper.validate(schema, validationResult, matchingSchemas, offset);\r\n\r\n\t\tif (schema.minLength && this.value.length < schema.minLength) {\r\n\t\t\tvalidationResult.warnings.push({\r\n\t\t\t\tlocation: { start: this.start, end: this.end },\r\n\t\t\t\tmessage: nls.localize('minLengthWarning', 'String is shorter than the minimum length of ', schema.minLength)\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (schema.maxLength && this.value.length > schema.maxLength) {\r\n\t\t\tvalidationResult.warnings.push({\r\n\t\t\t\tlocation: { start: this.start, end: this.end },\r\n\t\t\t\tmessage: nls.localize('maxLengthWarning', 'String is shorter than the maximum length of ', schema.maxLength)\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (schema.pattern) {\r\n\t\t\tvar regex = new RegExp(schema.pattern);\r\n\t\t\tif (!regex.test(this.value)) {\r\n\t\t\t\tvalidationResult.warnings.push({\r\n\t\t\t\t\tlocation: { start: this.start, end: this.end },\r\n\t\t\t\t\tmessage: schema.errorMessage || nls.localize('patternWarning', 'String does not match the pattern of \"{0}\"', schema.pattern)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n}\r\n\r\nexport class PropertyASTNode extends ASTNode {\r\n\tpublic key: StringASTNode;\r\n\tpublic value: ASTNode;\r\n\tpublic colonOffset: number;\r\n\r\n\tconstructor(parent:ASTNode, key: StringASTNode) {\r\n\t\tsuper(parent, 'property', null, key.start);\r\n\t\tthis.key = key;\r\n\t\tkey.parent = this;\r\n\t\tkey.name = key.value;\r\n\t\tthis.colonOffset = -1;\r\n\t}\r\n\r\n\tpublic getChildNodes(): ASTNode[] {\r\n\t\treturn this.value ? [this.key, this.value] : [ this.key];\r\n\t}\r\n\r\n\tpublic setValue(value: ASTNode): boolean {\r\n\t\tthis.value = value;\r\n\t\treturn value !== null;\r\n\t}\r\n\r\n\tpublic visit(visitor: (node:ASTNode) => boolean):boolean {\r\n\t\treturn visitor(this) && this.key.visit(visitor) && this.value && this.value.visit(visitor);\r\n\t}\r\n\r\n\tpublic validate(schema:JsonSchema.IJSONSchema, validationResult:ValidationResult, matchingSchemas:IApplicableSchema[], offset:number = -1):void {\r\n\t\tif (offset !== -1 && !this.contains(offset)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.value) {\r\n\t\t\tthis.value.validate(schema, validationResult, matchingSchemas, offset);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class ObjectASTNode extends ASTNode {\r\n\tpublic properties:PropertyASTNode[];\r\n\r\n\tconstructor(parent:ASTNode, name:string, start:number, end?:number) {\r\n\t\tsuper(parent, 'object', name, start, end);\r\n\r\n\t\tthis.properties = [];\r\n\t}\r\n\r\n\tpublic getChildNodes(): ASTNode[] {\r\n\t\treturn this.properties;\r\n\t}\r\n\r\n\tpublic addProperty(node:PropertyASTNode):boolean {\r\n\t\tif (!node) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.properties.push(node);\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpublic getFirstProperty(key:string) : PropertyASTNode {\r\n\t\tfor (var i = 0; i < this.properties.length; i++) {\r\n\t\t\tif (this.properties[i].key.value === key) {\r\n\t\t\t\treturn this.properties[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic getKeyList():string[] {\r\n\t\treturn this.properties.map((p)=>p.key.getValue());\r\n\t}\r\n\r\n\tpublic getValue():any {\r\n\t\tvar value : any= {};\r\n\t\tthis.properties.forEach((p) => {\r\n\t\t\tvar v = p.value && p.value.getValue();\r\n\t\t\tif (v) {\r\n\t\t\t\tvalue[p.key.getValue()] = v;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn value;\r\n\t}\r\n\r\n\tpublic visit(visitor: (node:ASTNode) => boolean):boolean {\r\n\t\tvar ctn = visitor(this);\r\n\t\tfor (var i = 0; i < this.properties.length && ctn; i++) {\r\n\t\t\tctn = this.properties[i].visit(visitor);\r\n\t\t}\r\n\t\treturn ctn;\r\n\t}\r\n\r\n\tpublic validate(schema:JsonSchema.IJSONSchema, validationResult:ValidationResult, matchingSchemas:IApplicableSchema[], offset:number = -1):void {\r\n\t\tif (offset !== -1 && !this.contains(offset)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsuper.validate(schema, validationResult, matchingSchemas, offset);\r\n\t\tvar seenKeys: { [key: string]:ASTNode } = {};\r\n\t\tvar unprocessedProperties: string[] = [];\r\n\t\tthis.properties.forEach((node) => {\r\n\t\t\tvar key = node.key.value;\r\n\t\t\tseenKeys[key] = node.value;\r\n\t\t\tunprocessedProperties.push(key);\r\n\t\t});\r\n\r\n\t\tif (Array.isArray(schema.required)) {\r\n\t\t\tschema.required.forEach((propertyName: string) => {\r\n\t\t\t\tif (!seenKeys[propertyName]) {\r\n\t\t\t\t\tvar key = this.parent && this.parent && (<PropertyASTNode> this.parent).key;\r\n\t\t\t\t\tvar location = key ? { start: key.start, end: key.end } : { start: this.start, end: this.start + 1 };\r\n\t\t\t\t\tvalidationResult.warnings.push({\r\n\t\t\t\t\t\tlocation: location,\r\n\t\t\t\t\t\tmessage: nls.localize('MissingRequiredPropWarning', 'Missing property \"{0}\"', propertyName)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\r\n\t\tvar propertyProcessed = (prop:string) => {\r\n\t\t\tvar index = unprocessedProperties.indexOf(prop);\r\n\t\t\twhile(index >= 0) {\r\n\t\t\t\tunprocessedProperties.splice(index, 1);\r\n\t\t\t\tindex = unprocessedProperties.indexOf(prop);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tif (schema.properties) {\r\n\t\t\tObject.keys(schema.properties).forEach((propertyName: string) => {\r\n\t\t\t\tpropertyProcessed(propertyName);\r\n\t\t\t\tvar prop = schema.properties[propertyName];\r\n\t\t\t\tvar child = seenKeys[propertyName];\r\n\t\t\t\tif (child) {\r\n\t\t\t\t\tvar propertyvalidationResult = new ValidationResult();\r\n\t\t\t\t\tchild.validate(prop, propertyvalidationResult, matchingSchemas, offset);\r\n\t\t\t\t\tvalidationResult.mergePropertyMatch(propertyvalidationResult);\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (schema.patternProperties) {\r\n\t\t\tObject.keys(schema.patternProperties).forEach((propertyPattern: string) => {\r\n\t\t\t\tvar regex = new RegExp(propertyPattern);\r\n\t\t\t\tunprocessedProperties.slice(0).forEach((propertyName: string) => {\r\n\t\t\t\t\tif (regex.test(propertyName)) {\r\n\t\t\t\t\t\tpropertyProcessed(propertyName);\r\n\t\t\t\t\t\tvar child = seenKeys[propertyName];\r\n\t\t\t\t\t\tif (child) {\r\n\t\t\t\t\t\t\tvar propertyvalidationResult = new ValidationResult();\r\n\t\t\t\t\t\t\tchild.validate(schema.patternProperties[propertyPattern], propertyvalidationResult, matchingSchemas, offset);\r\n\t\t\t\t\t\t\tvalidationResult.mergePropertyMatch(propertyvalidationResult);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (Types.isObject(schema.additionalProperties)) {\r\n\t\t\tunprocessedProperties.forEach((propertyName: string) => {\r\n\t\t\t\tvar child = seenKeys[propertyName];\r\n\t\t\t\tif (child) {\r\n\t\t\t\t\tvar propertyvalidationResult = new ValidationResult();\r\n\t\t\t\t\tchild.validate(schema.additionalProperties, propertyvalidationResult, matchingSchemas, offset);\r\n\t\t\t\t\tvalidationResult.mergePropertyMatch(propertyvalidationResult);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else if (schema.additionalProperties === false) {\r\n\t\t\tif (unprocessedProperties.length > 0) {\r\n\t\t\t\tunprocessedProperties.forEach((propertyName: string) => {\r\n\t\t\t\t\tvar child = seenKeys[propertyName];\r\n\t\t\t\t\tif (child) {\r\n\t\t\t\t\t\tvar propertyNode = <PropertyASTNode> child.parent;\r\n\r\n\t\t\t\t\t\tvalidationResult.warnings.push({\r\n\t\t\t\t\t\t\tlocation: { start: propertyNode.key.start, end: propertyNode.key.end },\r\n\t\t\t\t\t\t\tmessage: nls.localize('DisallowedExtraPropWarning', 'Property {0} is not allowed', propertyName)\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (schema.maxProperties) {\r\n\t\t\tif (this.properties.length > schema.maxProperties) {\r\n\t\t\t\tvalidationResult.warnings.push({\r\n\t\t\t\t\tlocation: { start: this.start, end: this.end },\r\n\t\t\t\t\tmessage: nls.localize('MaxPropWarning', 'Object has more properties than limit of {0}', schema.maxProperties)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (schema.minProperties) {\r\n\t\t\tif (this.properties.length < schema.minProperties) {\r\n\t\t\t\tvalidationResult.warnings.push({\r\n\t\t\t\t\tlocation: { start: this.start, end: this.end },\r\n\t\t\t\t\tmessage: nls.localize('MinPropWarning', 'Object has fewer properties than the required number of {0}', schema.minProperties)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (Types.isObject(schema.dependencies)) {\r\n\t\t\tObject.keys(schema.dependencies).forEach((key: string) => {\r\n\t\t\t\tvar prop = seenKeys[key];\r\n\t\t\t\tif (prop) {\r\n\t\t\t\t\tif (Array.isArray(schema.dependencies[key])) {\r\n\t\t\t\t\t\tvar valueAsArray:string[] = schema.dependencies[key];\r\n\t\t\t\t\t\tvalueAsArray.forEach((requiredProp: string) => {\r\n\t\t\t\t\t\t\tif (!seenKeys[requiredProp]) {\r\n\t\t\t\t\t\t\t\tvalidationResult.warnings.push({\r\n\t\t\t\t\t\t\t\t\tlocation: { start: this.start, end: this.end },\r\n\t\t\t\t\t\t\t\t\tmessage: nls.localize('RequiredDependentPropWarning', 'Object is missing property {0} required by property {1}', requiredProp, key)\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvalidationResult.propertiesValueMatches++;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else if (Types.isObject(schema.dependencies[key])) {\r\n\t\t\t\t\t\tvar valueAsSchema:JsonSchema.IJSONSchema = schema.dependencies[key];\r\n\t\t\t\t\t\tvar propertyvalidationResult = new ValidationResult();\r\n\t\t\t\t\t\tthis.validate(valueAsSchema, propertyvalidationResult, matchingSchemas, offset);\r\n\t\t\t\t\t\tvalidationResult.mergePropertyMatch(propertyvalidationResult);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class JSONDocumentConfig {\r\n\tpublic ignoreDanglingComma:boolean;\r\n\r\n\tconstructor() {\r\n\t\tthis.ignoreDanglingComma = false;\r\n\t}\r\n}\r\n\r\nexport interface IApplicableSchema {\r\n\tnode:ASTNode;\r\n\tinverted?:boolean;\r\n\tschema: JsonSchema.IJSONSchema;\r\n}\r\n\r\nexport class ValidationResult {\r\n\tpublic errors:IError[];\r\n\tpublic warnings:IError[];\r\n\r\n\tpublic propertiesMatches: number;\r\n\tpublic propertiesValueMatches: number;\r\n\tpublic enumValueMatch: boolean;\r\n\r\n\tconstructor() {\r\n\t\tthis.errors = [];\r\n\t\tthis.warnings = [];\r\n\t\tthis.propertiesMatches = 0;\r\n\t\tthis.propertiesValueMatches = 0;\r\n\t\tthis.enumValueMatch = false;\r\n\t}\r\n\r\n\tpublic hasErrors():boolean {\r\n\t\treturn !!this.errors.length || !!this.warnings.length;\r\n\t}\r\n\r\n\tpublic mergeAll(validationResults:ValidationResult[]):void {\r\n\t\tvalidationResults.forEach((validationResult) => {\r\n\t\t\tthis.merge(validationResult);\r\n\t\t});\r\n\t}\r\n\r\n\tpublic merge(validationResult:ValidationResult):void {\r\n\t\tthis.errors = this.errors.concat(validationResult.errors);\r\n\t\tthis.warnings = this.warnings.concat(validationResult.warnings);\r\n\t}\r\n\r\n\tpublic mergePropertyMatch(propertyValidationResult: ValidationResult) : void {\r\n\t\tthis.merge(propertyValidationResult);\r\n\t\tthis.propertiesMatches++;\r\n\t\tif (propertyValidationResult.enumValueMatch || !propertyValidationResult.hasErrors() && propertyValidationResult.propertiesMatches) {\r\n\t\t\tthis.propertiesValueMatches++;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic compare(other: ValidationResult) : number {\r\n\t\tvar hasErrors = this.hasErrors();\r\n\t\tif (hasErrors !== other.hasErrors()) {\r\n\t\t\treturn hasErrors ? -1 : 1;\r\n\t\t}\r\n\t\tif (this.enumValueMatch !== other.enumValueMatch) {\r\n\t\t\treturn other.enumValueMatch ? -1 : 1;\r\n\t\t}\r\n\t\tif (this.propertiesValueMatches !== other.propertiesValueMatches) {\r\n\t\t\treturn this.propertiesValueMatches - other.propertiesValueMatches;\r\n\t\t}\r\n\t\treturn this.propertiesMatches - other.propertiesMatches;\r\n\t}\r\n\r\n}\r\n\r\nexport class JSONDocument {\r\n\tpublic config:JSONDocumentConfig;\r\n\tpublic root:ASTNode;\r\n\r\n\tprivate validationResult:ValidationResult;\r\n\r\n\tconstructor(config:JSONDocumentConfig) {\r\n\t\tthis.config = config;\r\n\t\tthis.validationResult = new ValidationResult();\r\n\t}\r\n\r\n\tpublic get errors():IError[] {\r\n\t\treturn this.validationResult.errors;\r\n\t}\r\n\r\n\tpublic get warnings():IError[] {\r\n\t\treturn this.validationResult.warnings;\r\n\t}\r\n\r\n\tpublic getNodeFromOffset(offset:number):ASTNode {\r\n\t\treturn this.root && this.root.getNodeFromOffset(offset);\r\n\t}\r\n\r\n\tpublic getNodeFromOffsetEndInclusive(offset:number):ASTNode {\r\n\t\treturn this.root && this.root.getNodeFromOffsetEndInclusive(offset);\r\n\t}\r\n\r\n\tpublic visit(visitor: (node:ASTNode) => boolean):void {\r\n\t\tif (this.root) {\r\n\t\t\tthis.root.visit(visitor);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic validate(schema:JsonSchema.IJSONSchema, matchingSchemas:IApplicableSchema[]= null, offset:number = -1):void {\r\n\t\tif (this.root) {\r\n\t\t\tthis.root.validate(schema, this.validationResult, matchingSchemas, offset);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class JSONParser {\r\n\tpublic parse(text:string, config = new JSONDocumentConfig()):JSONDocument {\r\n\r\n\t\tvar _doc = new JSONDocument(config);\r\n\t\tvar _scanner = Json.createScanner(text, true);\r\n\r\n\t\tfunction _accept(token : Json.SyntaxKind) : boolean {\r\n\t\t\tif (_scanner.getToken() === token) {\r\n\t\t\t\t_scanner.scan();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfunction _error<T extends ASTNode>(message:string, node:T = null, skipUntilAfter: Json.SyntaxKind[] = [], skipUntil: Json.SyntaxKind[] = []) : T {\r\n\t\t\tif (_doc.errors.length === 0 || _doc.errors[0].location.start !== _scanner.getTokenOffset()) {\r\n\t\t\t\t// ignore multiple errors on the same offset\r\n\t\t\t\tvar error = { message: message, location: { start: _scanner.getTokenOffset(), end: _scanner.getTokenOffset() + _scanner.getTokenLength()}};\r\n\t\t\t\t_doc.errors.push(error);\r\n\t\t\t}\r\n\r\n\t\t\tif (node) {\r\n\t\t\t\t_finalize(node, false);\r\n\t\t\t}\r\n\t\t\tif (skipUntilAfter.length + skipUntil.length > 0) {\r\n\t\t\t\tvar token = _scanner.getToken();\r\n\t\t\t\twhile (token !== Json.SyntaxKind.EOF) {\r\n\t\t\t\t\tif (skipUntilAfter.indexOf(token) !== -1) {\r\n\t\t\t\t\t\t_scanner.scan();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t} else if (skipUntil.indexOf(token) !== -1) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttoken = _scanner.scan();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn node;\r\n\t\t}\r\n\r\n\t\tfunction _checkScanError() : boolean {\r\n\t\t\tswitch (_scanner.getTokenError()) {\r\n\t\t\t\tcase Json.ScanError.InvalidUnicode:\r\n\t\t\t\t\t_error(nls.localize('InvalidUnicode', 'Invalid unicode sequence in string'));\r\n\t\t\t\t\treturn true;\r\n\t\t\t\tcase Json.ScanError.InvalidEscapeCharacter:\r\n\t\t\t\t\t_error(nls.localize('InvalidEscapeCharacter', 'Invalid escape character in string'));\r\n\t\t\t\t\treturn true;\r\n\t\t\t\tcase Json.ScanError.UnexpectedEndOfNumber:\r\n\t\t\t\t\t_error(nls.localize('UnexpectedEndOfNumber', 'Unexpected end of number'));\r\n\t\t\t\t\treturn true;\r\n\t\t\t\tcase Json.ScanError.UnexpectedEndOfComment:\r\n\t\t\t\t\t_error(nls.localize('UnexpectedEndOfComment', 'Unexpected end of comment'));\r\n\t\t\t\t\treturn true;\r\n\t\t\t\tcase Json.ScanError.UnexpectedEndOfString:\r\n\t\t\t\t\t_error(nls.localize('UnexpectedEndOfString', 'Unexpected end of string'));\r\n\t\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfunction _finalize<T extends ASTNode>(node:T, scanNext:boolean) : T {\r\n\t\t\tnode.end = _scanner.getTokenOffset() + _scanner.getTokenLength();\r\n\r\n\t\t\tif (scanNext) {\r\n\t\t\t\t_scanner.scan();\r\n\t\t\t}\r\n\r\n\t\t\treturn node;\r\n\t\t}\r\n\r\n\t\tfunction _parseArray(parent:ASTNode, name:string):ArrayASTNode {\r\n\t\t\tif (_scanner.getToken() !== Json.SyntaxKind.OpenBracketToken) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tvar node = new ArrayASTNode(parent, name, _scanner.getTokenOffset());\r\n\t\t\t_scanner.scan(); // consume OpenBracketToken\r\n\r\n\t\t\tvar count = 0;\r\n\t\t\tif (node.addItem(_parseValue(node, '' + count++))) {\r\n\t\t\t\twhile (_accept(Json.SyntaxKind.CommaToken)) {\r\n\t\t\t\t\tif (!node.addItem(_parseValue(node, '' + count++)) && !_doc.config.ignoreDanglingComma) {\r\n\t\t\t\t\t\t_error(nls.localize('ValueExpected', 'Value expected'));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (_scanner.getToken() !== Json.SyntaxKind.CloseBracketToken) {\r\n\t\t\t\treturn _error(nls.localize('ExpectedCloseBracket', 'Expected comma or closing bracket'), node);\r\n\t\t\t}\r\n\r\n\t\t\treturn _finalize(node, true);\r\n\t\t}\r\n\r\n\t\tfunction _parseProperty(parent:ObjectASTNode, keysSeen:any):PropertyASTNode {\r\n\r\n\t\t\tvar key = _parseString(null, null, true);\r\n\t\t\tif (!key) {\r\n\t\t\t\tif (_scanner.getToken() === Json.SyntaxKind.Unknown) {\r\n\t\t\t\t\t// give a more helpful error message\r\n\t\t\t\t\tvar value = _scanner.getTokenValue();\r\n\t\t\t\t\tif (value.match(/^['\\w]/)) {\r\n\t\t\t\t\t\t_error(nls.localize('DoubleQuotesExpected', 'Property keys must be doublequoted'));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tvar node = new PropertyASTNode(parent, key);\r\n\r\n\t\t\tif (keysSeen[key.value]) {\r\n\t\t\t\t_doc.warnings.push( { location: { start: node.key.start, end: node.key.end }, message:nls.localize('DuplicateKeyWarning', \"Duplicate object key\")});\r\n\t\t\t}\r\n\t\t\tkeysSeen[key.value] = true;\r\n\r\n\t\t\tif (_scanner.getToken() === Json.SyntaxKind.ColonToken) {\r\n\t\t\t\tnode.colonOffset = _scanner.getTokenOffset();\r\n\t\t\t} else {\r\n\t\t\t\treturn _error(nls.localize('ColonExpected', 'Colon expected'), node, [], [Json.SyntaxKind.CloseBraceToken, Json.SyntaxKind.CommaToken] );\r\n\t\t\t}\r\n\r\n\t\t\t_scanner.scan(); // consume ColonToken\r\n\r\n\t\t\tif (!node.setValue(_parseValue(node, key.value))) {\r\n\t\t\t\treturn _error(nls.localize('ValueExpected', 'Value expected'), node, [], [Json.SyntaxKind.CloseBraceToken, Json.SyntaxKind.CommaToken]);\r\n\t\t\t}\r\n\t\t\tnode.end = node.value.end;\r\n\t\t\treturn node;\r\n\t\t}\r\n\r\n\t\tfunction _parseObject(parent:ASTNode, name:string):ObjectASTNode {\r\n\t\t\tif (_scanner.getToken() !== Json.SyntaxKind.OpenBraceToken) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tvar node = new ObjectASTNode(parent, name, _scanner.getTokenOffset());\r\n\t\t\t_scanner.scan(); // consume OpenBraceToken\r\n\r\n\t\t\tvar keysSeen : any = {};\r\n\t\t\tif (node.addProperty(_parseProperty(node, keysSeen))) {\r\n\t\t\t\twhile (_accept(Json.SyntaxKind.CommaToken)) {\r\n\t\t\t\t\tif (!node.addProperty(_parseProperty(node, keysSeen)) && !_doc.config.ignoreDanglingComma) {\r\n\t\t\t\t\t\t_error(nls.localize('PropertyExpected', 'Property expected'));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (_scanner.getToken() !== Json.SyntaxKind.CloseBraceToken) {\r\n\t\t\t\treturn _error(nls.localize('ExpectedCloseBrace', 'Expected comma or closing brace'), node);\r\n\t\t\t}\r\n\t\t\treturn _finalize(node, true);\r\n\t\t}\r\n\r\n\t\tfunction _parseString(parent:ASTNode, name: string, isKey:boolean):StringASTNode {\r\n\t\t\tif (_scanner.getToken() !== Json.SyntaxKind.StringLiteral) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tvar node = new StringASTNode(parent, name, isKey, _scanner.getTokenOffset());\r\n\t\t\tnode.value = _scanner.getTokenValue();\r\n\r\n\t\t\t_checkScanError();\r\n\r\n\t\t\treturn _finalize(node, true);\r\n\t\t}\r\n\r\n\t\tfunction _parseNumber(parent:ASTNode, name: string):NumberASTNode {\r\n\t\t\tif (_scanner.getToken() !== Json.SyntaxKind.NumericLiteral) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tvar node = new NumberASTNode(parent, name, _scanner.getTokenOffset());\r\n\t\t\tif (!_checkScanError()) {\r\n\t\t\t\tvar tokenValue = _scanner.getTokenValue();\r\n\t\t\t\ttry {\r\n\t\t\t\t\tvar numberValue = JSON.parse(tokenValue);\r\n\t\t\t\t\tif (typeof numberValue !== 'number') {\r\n\t\t\t\t\t\treturn _error(nls.localize('InvalidNumberFormat', 'Invalid number format'), node);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnode.value = numberValue;\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\treturn _error(nls.localize('InvalidNumberFormat', 'Invalid number format'), node);\r\n\t\t\t\t}\r\n\t\t\t\tnode.isInteger = tokenValue.indexOf('.') === -1;\r\n\t\t\t}\r\n\t\t\treturn _finalize(node, true);\r\n\t\t}\r\n\r\n\t\tfunction _parseLiteral(parent:ASTNode, name: string):ASTNode {\r\n\t\t\tvar node: ASTNode;\r\n\t\t\tswitch (_scanner.getToken()) {\r\n\t\t\t\tcase Json.SyntaxKind.NullKeyword:\r\n\t\t\t\t\tnode = new NullASTNode(parent, name, _scanner.getTokenOffset());\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase Json.SyntaxKind.TrueKeyword:\r\n\t\t\t\t\tnode = new BooleanASTNode(parent, name, true, _scanner.getTokenOffset());\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase Json.SyntaxKind.FalseKeyword:\r\n\t\t\t\t\tnode = new BooleanASTNode(parent, name, false, _scanner.getTokenOffset());\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn _finalize(node, true);\r\n\t\t}\r\n\r\n\t\tfunction _parseValue(parent:ASTNode, name:string):ASTNode {\r\n\t\t\treturn _parseArray(parent, name) || _parseObject(parent, name) || _parseString(parent, name, false) || _parseNumber(parent, name) || _parseLiteral(parent, name);\r\n\t\t}\r\n\r\n\t\t_scanner.scan();\r\n\r\n\t\t_doc.root = _parseValue(null, null);\r\n\t\tif (!_doc.root) {\r\n\t\t\t_error(nls.localize('Invalid symbol', 'Expected a JSON object, array or literal'));\r\n\t\t} else if (_scanner.getToken() !== Json.SyntaxKind.EOF) {\r\n\t\t\t_error(nls.localize('End of file expected', 'End of file expected'));\r\n\t\t}\r\n\t\treturn _doc;\r\n\t}\r\n}","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\n\r\nimport EditorCommon = require('vs/editor/common/editorCommon');\r\nimport Modes = require('vs/editor/common/modes');\r\nimport URI from 'vs/base/common/uri';\r\nimport Parser = require('./parser/jsonParser');\r\nimport SchemaService = require('./jsonSchemaService');\r\nimport Types = require('vs/base/common/types');\r\nimport WinJS = require('vs/base/common/winjs.base');\r\nimport JsonWorker = require('./jsonWorker');\r\nimport JsonSchema = require('vs/base/common/jsonSchema');\r\nimport nls = require('vs/nls');\r\nimport errors = require('vs/base/common/errors');\r\nimport {IRequestService} from 'vs/platform/request/common/request';\r\n\r\nexport class JSONIntellisense {\r\n\r\n\tprivate schemaService: SchemaService.IJSONSchemaService;\r\n\tprivate requestService: IRequestService;\r\n\tprivate contributions: JsonWorker.IJSONWorkerContribution[];\r\n\r\n\tconstructor(schemaService: SchemaService.IJSONSchemaService, requestService: IRequestService, contributions: JsonWorker.IJSONWorkerContribution[]) {\r\n\t\tthis.schemaService = schemaService;\r\n\t\tthis.requestService = requestService;\r\n\t\tthis.contributions = contributions;\r\n\t}\r\n\r\n\tpublic doSuggest(resource: URI, modelMirror: EditorCommon.IMirrorModel, position: EditorCommon.IPosition): WinJS.TPromise<Modes.ISuggestResult> {\r\n\t\tvar currentWord = modelMirror.getWordUntilPosition(position).word;\r\n\r\n\t\tvar parser = new Parser.JSONParser();\r\n\t\tvar config = new Parser.JSONDocumentConfig();\r\n\t\t// so you can invoke suggest after the comma in an object literal\r\n\t\tconfig.ignoreDanglingComma = true;\r\n\r\n\t\tvar doc = parser.parse(modelMirror.getValue(), config);\r\n\r\n\t\tvar result: Modes.ISuggestResult = {\r\n\t\t\tcurrentWord: currentWord,\r\n\t\t\tincomplete: false,\r\n\t\t\tsuggestions: []\r\n\t\t};\r\n\t\tvar overwriteBefore = void 0;\r\n\t\tvar overwriteAfter = void 0;\r\n\r\n\t\tvar proposed: { [key: string]: boolean } = {};\r\n\t\tvar collector : JsonWorker.ISuggestionsCollector = {\r\n\t\t\tadd: (suggestion: Modes.ISuggestion) => {\r\n\t\t\t\tif (!proposed[suggestion.label]) {\r\n\t\t\t\t\tproposed[suggestion.label] = true;\r\n\r\n\t\t\t\t\tsuggestion.overwriteBefore = overwriteBefore;\r\n\t\t\t\t\tsuggestion.overwriteAfter = overwriteAfter;\r\n\t\t\t\t\tresult.suggestions.push(suggestion);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsetAsIncomplete: () => {\r\n\t\t\t\tresult.incomplete = true;\r\n\t\t\t},\r\n\t\t\terror: (message: string) => {\r\n\t\t\t\terrors.onUnexpectedError(message);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn this.schemaService.getSchemaForResource(resource.toString(), doc).then((schema) => {\r\n\t\t\tvar collectionPromises: WinJS.Promise[] = [];\r\n\r\n\t\t\tvar offset = modelMirror.getOffsetFromPosition(position);\r\n\t\t\tvar node = doc.getNodeFromOffsetEndInclusive(offset);\r\n\t\t\tvar addValue = true;\r\n\t\t\tvar currentKey = currentWord;\r\n\t\t\tvar currentProperty : Parser.PropertyASTNode = null;\r\n\t\t\tif (node) {\r\n\r\n\t\t\t\tif (node.type === 'string') {\r\n\t\t\t\t\tvar stringNode = <Parser.StringASTNode> node;\r\n\t\t\t\t\tif (stringNode.isKey) {\r\n\t\t\t\t\t\tvar nodeRange = modelMirror.getRangeFromOffsetAndLength(node.start, node.end - node.start);\r\n\t\t\t\t\t\toverwriteBefore = position.column - nodeRange.startColumn;\r\n\t\t\t\t\t\toverwriteAfter = nodeRange.endColumn - position.column;\r\n\t\t\t\t\t\taddValue = !(node.parent && ((<Parser.PropertyASTNode> node.parent).value));\r\n\t\t\t\t\t\tcurrentProperty = node.parent ? <Parser.PropertyASTNode> node.parent : null;\r\n\t\t\t\t\t\tcurrentKey = modelMirror.getValueInRange({ startColumn: nodeRange.startColumn + 1, startLineNumber: nodeRange.startLineNumber, endColumn: position.column, endLineNumber: position.lineNumber });\r\n\t\t\t\t\t\tif (node.parent) {\r\n\t\t\t\t\t\t\tnode = node.parent.parent;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// proposals for properties\r\n\t\t\tif (node && node.type === 'object') {\r\n\t\t\t\t// don't suggest keys when the cursor is just before the opening curly brace\r\n\t\t\t\tif (node.start === offset) {\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t\t// don't suggest properties that are already present\r\n\t\t\t\tvar properties = (<Parser.ObjectASTNode> node).properties;\r\n\t\t\t\tproperties.forEach(p => {\r\n\t\t\t\t\tif (!currentProperty || currentProperty !== p) {\r\n\t\t\t\t\t\tproposed[p.key.value] = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (schema) {\r\n\t\t\t\t\t// property proposals with schema\r\n\t\t\t\t\tvar isLast = properties.length === 0 || offset >= properties[properties.length - 1].start;\r\n\t\t\t\t\tthis.getPropertySuggestions(resource, schema, doc, node, currentKey, addValue, isLast, collector);\r\n\t\t\t\t} else if (node.parent) {\r\n\t\t\t\t\t// property proposals without schema\r\n\t\t\t\t\tthis.getSchemaLessPropertySuggestions(doc, node, collector);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar location = node.getNodeLocation();\r\n\t\t\t\tthis.contributions.forEach((contribution) => {\r\n\t\t\t\t\tvar collectPromise = contribution.collectPropertySuggestions(resource, location, currentWord, addValue, isLast, collector);\r\n\t\t\t\t\tif (collectPromise) {\r\n\t\t\t\t\t\tcollectionPromises.push(collectPromise);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// proposals for values\r\n\t\t\tif (node && (node.type === 'string' || node.type === 'number' || node.type === 'integer' || node.type === 'boolean' || node.type === 'null')) {\r\n\t\t\t\tvar nodeRange = modelMirror.getRangeFromOffsetAndLength(node.start, node.end - node.start);\r\n\t\t\t\toverwriteBefore = position.column - nodeRange.startColumn;\r\n\t\t\t\toverwriteAfter = nodeRange.endColumn - position.column;\r\n\t\t\t\tnode = node.parent;\r\n\t\t\t}\r\n\r\n\t\t\tif (schema) {\r\n\t\t\t\t// value proposals with schema\r\n\t\t\t\tthis.getValueSuggestions(resource, schema, doc, node, offset, collector);\r\n\t\t\t} else {\r\n\t\t\t\t// value proposals without schema\r\n\t\t\t\tthis.getSchemaLessValueSuggestions(doc, node, offset, modelMirror, collector);\r\n\t\t\t}\r\n\t\t\tif (!node) {\r\n\t\t\t\tthis.contributions.forEach((contribution) => {\r\n\t\t\t\t\tvar collectPromise = contribution.collectDefaultSuggestions(resource, collector);\r\n\t\t\t\t\tif (collectPromise) {\r\n\t\t\t\t\t\tcollectionPromises.push(collectPromise);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tif ((node.type === 'property') && offset > (<Parser.PropertyASTNode> node).colonOffset) {\r\n\t\t\t\t\tvar parentKey = (<Parser.PropertyASTNode>node).key.value;\r\n\r\n\t\t\t\t\tvar valueNode = (<Parser.PropertyASTNode> node).value;\r\n\t\t\t\t\tif (!valueNode || offset <= valueNode.end) {\r\n\t\t\t\t\t\tvar location = node.parent.getNodeLocation();\r\n\t\t\t\t\t\tthis.contributions.forEach((contribution) => {\r\n\t\t\t\t\t\t\tvar collectPromise = contribution.collectValueSuggestions(resource, location, parentKey, collector);\r\n\t\t\t\t\t\t\tif (collectPromise) {\r\n\t\t\t\t\t\t\t\tcollectionPromises.push(collectPromise);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\treturn WinJS.Promise.join(collectionPromises).then(() => { return result; } );\r\n\t\t});\r\n\t}\r\n\r\n\tprivate getPropertySuggestions(resource: URI, schema: SchemaService.ResolvedSchema, doc: Parser.JSONDocument, node: Parser.ASTNode, currentWord: string, addValue: boolean, isLast: boolean, collector: JsonWorker.ISuggestionsCollector): void {\r\n\t\tvar matchingSchemas: Parser.IApplicableSchema[] = [];\r\n\t\tdoc.validate(schema.schema, matchingSchemas, node.start);\r\n\r\n\t\tmatchingSchemas.forEach((s) => {\r\n\t\t\tif (s.node === node && !s.inverted) {\r\n\t\t\t\tvar schemaProperties = s.schema.properties;\r\n\t\t\t\tif (schemaProperties) {\r\n\t\t\t\t\tObject.keys(schemaProperties).forEach((key: string) => {\r\n\t\t\t\t\t\tvar propertySchema = schemaProperties[key];\r\n\t\t\t\t\t\tcollector.add({ type: 'property', label: key, codeSnippet: this.getTextForProperty(key, propertySchema, addValue, isLast), documentationLabel: propertySchema.description || '' });\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate getSchemaLessPropertySuggestions(doc: Parser.JSONDocument, node: Parser.ASTNode, collector: JsonWorker.ISuggestionsCollector): void {\r\n\t\tvar collectSuggestionsForSimilarObject = (obj: Parser.ObjectASTNode) => {\r\n\t\t\tobj.properties.forEach((p) => {\r\n\t\t\t\tvar key = p.key.value;\r\n\t\t\t\tcollector.add({ type: 'property', label: key, codeSnippet: this.getTextForSimilarProperty(key, p.value), documentationLabel: '' });\r\n\t\t\t});\r\n\t\t};\r\n\t\tif (node.parent.type === 'property') {\r\n\t\t\t// if the object is a property value, check the tree for other objects that hang under a property of the same name\r\n\t\t\tvar parentKey = (<Parser.PropertyASTNode>node.parent).key.value;\r\n\t\t\tdoc.visit((n) => {\r\n\t\t\t\tif (n.type === 'property' && (<Parser.PropertyASTNode>n).key.value === parentKey && (<Parser.PropertyASTNode>n).value && (<Parser.PropertyASTNode>n).value.type === 'object') {\r\n\t\t\t\t\tcollectSuggestionsForSimilarObject(<Parser.ObjectASTNode> (<Parser.PropertyASTNode>n).value);\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t\t} else if (node.parent.type === 'array') {\r\n\t\t\t// if the object is in an array, use all other array elements as similar objects\r\n\t\t\t(<Parser.ArrayASTNode> node.parent).items.forEach((n) => {\r\n\t\t\t\tif (n.type === 'object' && n !== node) {\r\n\t\t\t\t\tcollectSuggestionsForSimilarObject(<Parser.ObjectASTNode> n);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getSchemaLessValueSuggestions(doc: Parser.JSONDocument, node: Parser.ASTNode, offset: number, modelMirror: EditorCommon.IMirrorModel, collector: JsonWorker.ISuggestionsCollector): void {\r\n\t\tvar collectSuggestionsForValues = (value: Parser.ASTNode) => {\r\n\t\t\tvar content = this.getTextForMatchingNode(value, modelMirror);\r\n\t\t\tcollector.add({ type: this.getSuggestionType(value.type), label: content, codeSnippet: content, documentationLabel: '' });\r\n\t\t\tif (value.type === 'boolean') {\r\n\t\t\t\tthis.addBooleanSuggestion(!value.getValue(), collector);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tif (!node) {\r\n\t\t\tcollector.add({ type: this.getSuggestionType('object'), label: 'Empty object', codeSnippet: '{\\n\\t{{}}\\n}', documentationLabel: '' });\r\n\t\t\tcollector.add({ type: this.getSuggestionType('array'), label: 'Empty array', codeSnippet: '[\\n\\t{{}}\\n]', documentationLabel: '' });\r\n\t\t} else {\r\n\t\t\tif (node.type === 'property' && offset > (<Parser.PropertyASTNode> node).colonOffset) {\r\n\t\t\t\tvar valueNode = (<Parser.PropertyASTNode>node).value;\r\n\t\t\t\tif (valueNode && offset > valueNode.end) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// suggest values at the same key\r\n\t\t\t\tvar parentKey = (<Parser.PropertyASTNode>node).key.value;\r\n\t\t\t\tdoc.visit((n) => {\r\n\t\t\t\t\tif (n.type === 'property' && (<Parser.PropertyASTNode>n).key.value === parentKey && (<Parser.PropertyASTNode>n).value) {\r\n\t\t\t\t\t\tcollectSuggestionsForValues((<Parser.PropertyASTNode>n).value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (node.type === 'array') {\r\n\t\t\t\tif (node.parent && node.parent.type === 'property') {\r\n\t\t\t\t\t// suggest items of an array at the same key\r\n\t\t\t\t\tvar parentKey = (<Parser.PropertyASTNode>node.parent).key.value;\r\n\t\t\t\t\tdoc.visit((n) => {\r\n\t\t\t\t\t\tif (n.type === 'property' && (<Parser.PropertyASTNode>n).key.value === parentKey && (<Parser.PropertyASTNode>n).value && (<Parser.PropertyASTNode>n).value.type === 'array') {\r\n\t\t\t\t\t\t\t((<Parser.ArrayASTNode>(<Parser.PropertyASTNode>n).value).items).forEach((n) => {\r\n\t\t\t\t\t\t\t\tcollectSuggestionsForValues(<Parser.ObjectASTNode> n);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// suggest items in the same array\r\n\t\t\t\t\t(<Parser.ArrayASTNode> node).items.forEach((n) => {\r\n\t\t\t\t\t\tcollectSuggestionsForValues(<Parser.ObjectASTNode> n);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tpublic getValueSuggestions(resource: URI, schema: SchemaService.ResolvedSchema, doc: Parser.JSONDocument, node: Parser.ASTNode, offset: number, collector: JsonWorker.ISuggestionsCollector) : void {\r\n\r\n\t\tif (!node) {\r\n\t\t\tthis.addDefaultSuggestion(schema.schema, collector);\r\n\t\t} else {\r\n\t\t\tvar parentKey: string = null;\r\n\t\t\tif (node && (node.type === 'property') && offset > (<Parser.PropertyASTNode> node).colonOffset) {\r\n\t\t\t\tvar valueNode = (<Parser.PropertyASTNode> node).value;\r\n\t\t\t\tif (valueNode && offset > valueNode.end) {\r\n\t\t\t\t\treturn; // we are past the value node\r\n\t\t\t\t}\r\n\t\t\t\tparentKey = (<Parser.PropertyASTNode>node).key.value;\r\n\t\t\t\tnode = node.parent;\r\n\t\t\t}\r\n\t\t\tif (node && (parentKey !== null || node.type === 'array')) {\r\n\t\t\t\tvar matchingSchemas: Parser.IApplicableSchema[] = [];\r\n\t\t\t\tdoc.validate(schema.schema, matchingSchemas, node.start);\r\n\r\n\t\t\t\tmatchingSchemas.forEach((s) => {\r\n\t\t\t\t\tif (s.node === node && !s.inverted && s.schema) {\r\n\t\t\t\t\t\tif (s.schema.items) {\r\n\t\t\t\t\t\t\tthis.addDefaultSuggestion(s.schema.items, collector);\r\n\t\t\t\t\t\t\tthis.addEnumSuggestion(s.schema.items, collector);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (s.schema.properties) {\r\n\t\t\t\t\t\t\tvar propertySchema = s.schema.properties[parentKey];\r\n\t\t\t\t\t\t\tif (propertySchema) {\r\n\t\t\t\t\t\t\t\tthis.addDefaultSuggestion(propertySchema, collector);\r\n\t\t\t\t\t\t\t\tthis.addEnumSuggestion(propertySchema, collector);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate addBooleanSuggestion(value: boolean, collector: JsonWorker.ISuggestionsCollector): void {\r\n\t\tcollector.add({ type: this.getSuggestionType('boolean'), label: value ? 'true' : 'false', codeSnippet: this.getTextForEnumValue(value), documentationLabel: '' });\r\n\t}\r\n\r\n\tprivate addEnumSuggestion(schema: JsonSchema.IJSONSchema, collector: JsonWorker.ISuggestionsCollector): void {\r\n\t\tif (Array.isArray(schema.enum)) {\r\n\t\t\tschema.enum.forEach((enm) => collector.add({ type: this.getSuggestionType(schema.type), label: this.getLabelForValue(enm), codeSnippet: this.getTextForEnumValue(enm), documentationLabel: '' }));\r\n\t\t} else if (schema.type === 'boolean') {\r\n\t\t\tthis.addBooleanSuggestion(true, collector);\r\n\t\t\tthis.addBooleanSuggestion(false, collector);\r\n\t\t}\r\n\t\tif (Array.isArray(schema.allOf)) {\r\n\t\t\tschema.allOf.forEach((s) => this.addEnumSuggestion(s, collector));\r\n\t\t}\r\n\t\tif (Array.isArray(schema.anyOf)) {\r\n\t\t\tschema.anyOf.forEach((s) => this.addEnumSuggestion(s, collector));\r\n\t\t}\r\n\t\tif (Array.isArray(schema.oneOf)) {\r\n\t\t\tschema.oneOf.forEach((s) => this.addEnumSuggestion(s, collector));\r\n\t\t}\r\n\t}\r\n\r\n\tprivate addDefaultSuggestion(schema: JsonSchema.IJSONSchema, collector: JsonWorker.ISuggestionsCollector): void {\r\n\t\tif (schema.default) {\r\n\t\t\tcollector.add({\r\n\t\t\t\ttype: this.getSuggestionType(schema.type),\r\n\t\t\t\tlabel: this.getLabelForValue(schema.default),\r\n\t\t\t\tcodeSnippet: this.getTextForValue(schema.default),\r\n\t\t\t\ttypeLabel:  nls.localize('json.suggest.default', 'Default value'),\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (Array.isArray(schema.defaultSnippets)) {\r\n\t\t\tschema.defaultSnippets.forEach(s => {\r\n\t\t\t\tcollector.add({\r\n\t\t\t\t\ttype: 'snippet',\r\n\t\t\t\t\tlabel: this.getLabelForSnippetValue(s.body),\r\n\t\t\t\t\tcodeSnippet: this.getTextForSnippetValue(s.body)\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (Array.isArray(schema.allOf)) {\r\n\t\t\tschema.allOf.forEach((s) => this.addDefaultSuggestion(s, collector));\r\n\t\t}\r\n\t\tif (Array.isArray(schema.anyOf)) {\r\n\t\t\tschema.anyOf.forEach((s) => this.addDefaultSuggestion(s, collector));\r\n\t\t}\r\n\t\tif (Array.isArray(schema.oneOf)) {\r\n\t\t\tschema.oneOf.forEach((s) => this.addDefaultSuggestion(s, collector));\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getLabelForValue(value: any) : string {\r\n\t\tvar label = JSON.stringify(value);\r\n\t\tlabel = label.replace('{{', '').replace('}}', '');\r\n\t\tif (label.length > 57) {\r\n\t\t\treturn label.substr(0, 57).trim() + '...';\r\n\t\t}\r\n\t\treturn label;\r\n\t}\r\n\r\n\tprivate getLabelForSnippetValue(value: any): string {\r\n\t\tlet label = JSON.stringify(value);\r\n\t\tlabel = label.replace(/\\{\\{|\\}\\}/g, '');\r\n\t\tif (label.length > 57) {\r\n\t\t\treturn label.substr(0, 57).trim() + '...';\r\n\t\t}\r\n\t\treturn label;\r\n\t}\r\n\r\n\tprivate getTextForValue(value: any): string {\r\n\t\tvar text = JSON.stringify(value, null, '\\t');\r\n\t\ttext = text.replace(/[\\\\\\{\\}]/g, '\\\\$&');\r\n\t\treturn text;\r\n\t}\r\n\r\n\tprivate getTextForSnippetValue(value: any): string {\r\n\t\treturn JSON.stringify(value, null, '\\t');\r\n\t}\r\n\r\n\tprivate getTextForEnumValue(value: any) : string {\r\n\t\tvar snippet = JSON.stringify(value, null, '\\t');\r\n\t\tswitch (typeof value) {\r\n\t\t\tcase 'object':\r\n\t\t\t\tif (value === null) {\r\n\t\t\t\t\treturn '{{null}}';\r\n\t\t\t\t}\r\n\t\t\t\treturn snippet;\r\n\t\t\tcase 'string':\r\n\t\t\t\treturn '\"{{' + snippet.substr(1, snippet.length - 2) + '}}\"';\r\n\t\t\tcase 'number':\r\n\t\t\tcase 'integer':\r\n\t\t\tcase 'boolean':\r\n\t\t\t\treturn '{{' + snippet + '}}';\r\n\t\t}\r\n\t\treturn snippet;\r\n\t}\r\n\r\n\tprivate getSuggestionType(type: any): Modes.SuggestionType {\r\n\t\tif (Array.isArray(type)) {\r\n\t\t\tvar array = <any[]> type;\r\n\t\t\ttype = array.length > 0 ? array[0] : null;\r\n\t\t}\r\n\t\tif (!type) {\r\n\t\t\treturn 'text';\r\n\t\t}\r\n\t\tswitch (type) {\r\n\t\t\tcase 'string': return 'text';\r\n\t\t\tcase 'object': return 'module';\r\n\t\t\tcase 'property': return 'property';\r\n\t\t\tdefault: return 'value';\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tprivate getTextForMatchingNode(node: Parser.ASTNode, modelMirror: EditorCommon.IMirrorModel): string {\r\n\t\tswitch (node.type) {\r\n\t\t\tcase 'array':\r\n\t\t\t\treturn '[]';\r\n\t\t\tcase 'object':\r\n\t\t\t\treturn '{}';\r\n\t\t\tdefault:\r\n\t\t\t\tvar content = modelMirror.getValueInRange(modelMirror.getRangeFromOffsetAndLength(node.start, node.end - node.start));\r\n\t\t\t\treturn content;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getTextForProperty(key: string, propertySchema: JsonSchema.IJSONSchema, addValue:boolean, isLast: boolean): string {\r\n\r\n\t\tlet result = this.getTextForValue(key);\r\n\t\tif (!addValue) {\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tresult += ': ';\r\n\r\n\t\tvar defaultVal = propertySchema.default;\r\n\t\tif (!Types.isUndefined(defaultVal)) {\r\n\t\t\tresult = result + this.getTextForEnumValue(defaultVal);\r\n\t\t} else if (propertySchema.enum && propertySchema.enum.length > 0) {\r\n\t\t\tresult = result + this.getTextForEnumValue(propertySchema.enum[0]);\r\n\t\t} else {\r\n\t\t\tswitch (propertySchema.type) {\r\n\t\t\t\tcase 'boolean':\r\n\t\t\t\t\tresult += '{{false}}';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'string':\r\n\t\t\t\t\tresult += '\"{{}}\"';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'object':\r\n\t\t\t\t\tresult += '{\\n\\t{{}}\\n}';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'array':\r\n\t\t\t\t\tresult += '[\\n\\t{{}}\\n]';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'number':\r\n\t\t\t\tcase 'integer':\r\n\t\t\t\t\tresult += '{{0}}';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'null':\r\n\t\t\t\t\tresult += '{{null}}';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!isLast) {\r\n\t\t\tresult += ',';\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tprivate getTextForSimilarProperty(key: string, templateValue: Parser.ASTNode): string {\r\n\t\treturn this.getTextForValue(key);\r\n\t}\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\n\r\nimport HtmlContent = require('vs/base/common/htmlContent');\r\nimport Strings = require('vs/base/common/strings');\r\nimport WinJS = require('vs/base/common/winjs.base');\r\nimport nls = require('vs/nls');\r\nimport JSONWorker = require('vs/languages/json/common/jsonWorker');\r\nimport {IRequestService} from 'vs/platform/request/common/request';\r\nimport URI from 'vs/base/common/uri';\r\nimport {JSONLocation} from 'vs/languages/json/common/parser/jsonLocation';\r\n\r\nexport class BowerJSONContribution implements JSONWorker.IJSONWorkerContribution {\r\n\r\n\tprivate requestService : IRequestService;\r\n\r\n\tprivate topRanked = ['twitter','bootstrap','angular-1.1.6','angular-latest','angulerjs','d3','myjquery','jq','abcdef1234567890','jQuery','jquery-1.11.1','jquery',\r\n\t\t'sushi-vanilla-x-data','font-awsome','Font-Awesome','font-awesome','fontawesome','html5-boilerplate','impress.js','homebrew',\r\n\t\t'backbone','moment1','momentjs','moment','linux','animate.css','animate-css','reveal.js','jquery-file-upload','blueimp-file-upload','threejs','express','chosen',\r\n\t\t'normalize-css','normalize.css','semantic','semantic-ui','Semantic-UI','modernizr','underscore','underscore1',\r\n\t\t'material-design-icons','ionic','chartjs','Chart.js','nnnick-chartjs','select2-ng','select2-dist','phantom','skrollr','scrollr','less.js','leancss','parser-lib',\r\n\t\t'hui','bootstrap-languages','async','gulp','jquery-pjax','coffeescript','hammer.js','ace','leaflet','jquery-mobile','sweetalert','typeahead.js','soup','typehead.js',\r\n\t\t'sails','codeigniter2'];\r\n\r\n\tpublic constructor(@IRequestService requestService: IRequestService) {\r\n\t\tthis.requestService = requestService;\r\n\t}\r\n\r\n\tprivate isBowerFile(resource: URI): boolean {\r\n\t\tvar path = resource.path;\r\n\t\treturn Strings.endsWith(path, '/bower.json') || Strings.endsWith(path, '/.bower.json');\r\n\t}\r\n\r\n\tpublic collectDefaultSuggestions(resource: URI, result: JSONWorker.ISuggestionsCollector): WinJS.Promise {\r\n\t\tif (this.isBowerFile(resource)) {\r\n\t\t\tvar defaultValue = {\r\n\t\t\t\t'name': '{{name}}',\r\n\t\t\t\t'description': '{{description}}',\r\n\t\t\t\t'authors': [ '{{author}}' ],\r\n\t\t\t\t'version': '{{1.0.0}}',\r\n\t\t\t\t'main': '{{pathToMain}}',\r\n\t\t\t\t'dependencies': {}\r\n\t\t\t};\r\n\t\t\tresult.add({ type: 'snippet', label: nls.localize('json.bower.default', 'Default bower.json'), codeSnippet: JSON.stringify(defaultValue, null, '\\t'), documentationLabel: '' });\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic collectPropertySuggestions(resource: URI, location: JSONLocation, currentWord: string, addValue: boolean, isLast:boolean, result: JSONWorker.ISuggestionsCollector) : WinJS.Promise {\r\n\t\tif (this.isBowerFile(resource) && (location.matches(['dependencies']) || location.matches(['devDependencies']))) {\r\n\t\t\tif (currentWord.length > 0) {\r\n\t\t\t\tvar queryUrl = 'https://bower.herokuapp.com/packages/search/' + encodeURIComponent(currentWord);\r\n\r\n\t\t\t\treturn this.requestService.makeRequest({\r\n\t\t\t\t\turl : queryUrl\r\n\t\t\t\t}).then((success) => {\r\n\t\t\t\t\tif (success.status === 200) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tvar obj = JSON.parse(success.responseText);\r\n\t\t\t\t\t\t\tif (Array.isArray(obj)) {\r\n\t\t\t\t\t\t\t\tvar results = <{name:string; description:string;}[]> obj;\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < results.length; i++) {\r\n\t\t\t\t\t\t\t\t\tvar name = results[i].name;\r\n\t\t\t\t\t\t\t\t\tvar description = results[i].description || '';\r\n\t\t\t\t\t\t\t\t\tvar codeSnippet = JSON.stringify(name);\r\n\t\t\t\t\t\t\t\t\tif (addValue) {\r\n\t\t\t\t\t\t\t\t\t\tcodeSnippet += ': \"{{*}}\"';\r\n\t\t\t\t\t\t\t\t\t\tif (!isLast) {\r\n\t\t\t\t\t\t\t\t\t\t\tcodeSnippet += ',';\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tresult.add({ type: 'property', label: name, codeSnippet: codeSnippet, documentationLabel: description });\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tresult.setAsIncomplete();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t// ignore\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresult.error(nls.localize('json.bower.error.repoaccess', 'Request to the bower repository failed: {0}', success.responseText));\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}, (error) => {\r\n\t\t\t\t\tresult.error(nls.localize('json.bower.error.repoaccess', 'Request to the bower repository failed: {0}', error.responseText));\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.topRanked.forEach((name) => {\r\n\t\t\t\t\tvar codeSnippet = JSON.stringify(name);\r\n\t\t\t\t\tif (addValue) {\r\n\t\t\t\t\t\tcodeSnippet += ': \"{{*}}\"';\r\n\t\t\t\t\t\tif (!isLast) {\r\n\t\t\t\t\t\t\tcodeSnippet += ',';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresult.add({ type: 'property', label: name, codeSnippet: codeSnippet, documentationLabel: '' });\r\n\t\t\t\t});\r\n\t\t\t\tresult.setAsIncomplete();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic collectValueSuggestions(resource: URI, location: JSONLocation, currentKey: string, result: JSONWorker.ISuggestionsCollector): WinJS.Promise {\r\n\t\t// not implemented. Could be do done calling the bower command. Waiting for web API: https://github.com/bower/registry/issues/26\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic getInfoContribution(resource: URI, location: JSONLocation): WinJS.TPromise<HtmlContent.IHTMLContentElement[]> {\r\n\t\tif (this.isBowerFile(resource) && (location.matches(['dependencies', '*']) || location.matches(['devDependencies', '*']))) {\r\n\t\t\tvar pack = location.getSegments()[location.getSegments().length - 1];\r\n\t\t\tvar htmlContent : HtmlContent.IHTMLContentElement[] = [];\r\n\t\t\thtmlContent.push({className: 'type', text: nls.localize('json.bower.package.hover', '{0}', pack) });\r\n\r\n\t\t\tvar queryUrl = 'https://bower.herokuapp.com/packages/' + encodeURIComponent(pack);\r\n\r\n\t\t\treturn this.requestService.makeRequest({\r\n\t\t\t\turl : queryUrl\r\n\t\t\t}).then((success) => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tvar obj = JSON.parse(success.responseText);\r\n\t\t\t\t\tif (obj && obj.url) {\r\n\t\t\t\t\t\tvar url = obj.url;\r\n\t\t\t\t\t\tif (Strings.startsWith(url, 'git://')) {\r\n\t\t\t\t\t\t\turl = url.substring(6);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (Strings.endsWith(url, '.git')) {\r\n\t\t\t\t\t\t\turl = url.substring(0, url.length - 4);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\thtmlContent.push({className: 'documentation', text: url });\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t// ignore\r\n\t\t\t\t}\r\n\t\t\t\treturn htmlContent;\r\n\t\t\t}, (error) => {\r\n\t\t\t\treturn htmlContent;\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n}","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\n\r\nimport HtmlContent = require('vs/base/common/htmlContent');\r\nimport Strings = require('vs/base/common/strings');\r\nimport WinJS = require('vs/base/common/winjs.base');\r\nimport nls = require('vs/nls');\r\nimport JSONWorker = require('vs/languages/json/common/jsonWorker');\r\nimport {IRequestService} from 'vs/platform/request/common/request';\r\nimport URI from 'vs/base/common/uri';\r\nimport {JSONLocation} from 'vs/languages/json/common/parser/jsonLocation';\r\n\r\nvar LIMIT = 40;\r\n\r\nexport class PackageJSONContribution implements JSONWorker.IJSONWorkerContribution {\r\n\r\n\tprivate mostDependedOn = [ 'lodash', 'async', 'underscore', 'request', 'commander', 'express', 'debug', 'chalk', 'colors', 'q', 'coffee-script',\r\n\t\t'mkdirp', 'optimist', 'through2', 'yeoman-generator', 'moment', 'bluebird', 'glob', 'gulp-util', 'minimist', 'cheerio', 'jade', 'redis', 'node-uuid',\r\n\t\t'socket', 'io', 'uglify-js', 'winston', 'through', 'fs-extra', 'handlebars', 'body-parser', 'rimraf', 'mime', 'semver', 'mongodb', 'jquery',\r\n\t\t'grunt', 'connect', 'yosay', 'underscore', 'string', 'xml2js', 'ejs', 'mongoose', 'marked', 'extend', 'mocha', 'superagent', 'js-yaml', 'xtend',\r\n\t\t'shelljs', 'gulp', 'yargs', 'browserify', 'minimatch', 'react', 'less', 'prompt', 'inquirer', 'ws', 'event-stream', 'inherits', 'mysql', 'esprima',\r\n\t\t'jsdom', 'stylus', 'when', 'readable-stream', 'aws-sdk', 'concat-stream', 'chai', 'promise', 'wrench'];\r\n\r\n\tprivate requestService : IRequestService;\r\n\r\n\tprivate isPackageJSONFile(resource: URI): boolean {\r\n\t\tvar path = resource.path;\r\n\t\treturn Strings.endsWith(path, '/package.json');\r\n\t}\r\n\r\n\tpublic constructor(@IRequestService requestService: IRequestService) {\r\n\t\tthis.requestService = requestService;\r\n\t}\r\n\r\n\tpublic collectDefaultSuggestions(resource: URI, result: JSONWorker.ISuggestionsCollector): WinJS.Promise {\r\n\t\tif (this.isPackageJSONFile(resource)) {\r\n\t\t\tvar defaultValue = {\r\n\t\t\t\t'name': '{{name}}',\r\n\t\t\t\t'description': '{{description}}',\r\n\t\t\t\t'author': '{{author}}',\r\n\t\t\t\t'version': '{{1.0.0}}',\r\n\t\t\t\t'main': '{{pathToMain}}',\r\n\t\t\t\t'dependencies': {}\r\n\t\t\t};\r\n\t\t\tresult.add({ type: 'module', label: nls.localize('json.package.default', 'Default package.json'), codeSnippet: JSON.stringify(defaultValue, null, '\\t'), documentationLabel: '' });\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic collectPropertySuggestions(resource: URI, location: JSONLocation, currentWord: string, addValue: boolean, isLast:boolean, result: JSONWorker.ISuggestionsCollector) : WinJS.Promise {\r\n\t\tif (this.isPackageJSONFile(resource) && (location.matches(['dependencies']) || location.matches(['devDependencies']) || location.matches(['optionalDependencies']) || location.matches(['peerDependencies']))) {\r\n\t\t\tvar queryUrl : string;\r\n\t\t\tif (currentWord.length > 0) {\r\n\t\t\t\tqueryUrl = 'https://skimdb.npmjs.com/registry/_design/app/_view/browseAll?group_level=1&limit=' + LIMIT + '&start_key=%5B%22' + encodeURIComponent(currentWord) + '%22%5D&end_key=%5B%22'+ encodeURIComponent(currentWord + 'z') + '%22,%7B%7D%5D';\r\n\r\n\t\t\t\treturn this.requestService.makeRequest({\r\n\t\t\t\t\turl : queryUrl\r\n\t\t\t\t}).then((success) => {\r\n\t\t\t\t\tif (success.status === 200) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tvar obj = JSON.parse(success.responseText);\r\n\t\t\t\t\t\t\tif (obj && Array.isArray(obj.rows)) {\r\n\t\t\t\t\t\t\t\tvar results = <{ key: string[]; }[]> obj.rows;\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < results.length; i++) {\r\n\t\t\t\t\t\t\t\t\tvar keys = results[i].key;\r\n\t\t\t\t\t\t\t\t\tif (Array.isArray(keys) && keys.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\tvar name = keys[0];\r\n\t\t\t\t\t\t\t\t\t\tvar codeSnippet = JSON.stringify(name);\r\n\t\t\t\t\t\t\t\t\t\tif (addValue) {\r\n\t\t\t\t\t\t\t\t\t\t\tcodeSnippet += ': \"{{*}}\"';\r\n\t\t\t\t\t\t\t\t\t\t\tif (!isLast) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tcodeSnippet += ',';\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tresult.add({ type: 'property', label: name, codeSnippet: codeSnippet, documentationLabel: '' });\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (results.length === LIMIT) {\r\n\t\t\t\t\t\t\t\t\tresult.setAsIncomplete();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t// ignore\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresult.error(nls.localize('json.npm.error.repoaccess', 'Request to the NPM repository failed: {0}', success.responseText));\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}, (error) => {\r\n\t\t\t\t\tresult.error(nls.localize('json.npm.error.repoaccess', 'Request to the NPM repository failed: {0}', error.responseText));\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.mostDependedOn.forEach((name) => {\r\n\t\t\t\t\tvar codeSnippet = JSON.stringify(name);\r\n\t\t\t\t\tif (addValue) {\r\n\t\t\t\t\t\tcodeSnippet += ': \"{{*}}\"';\r\n\t\t\t\t\t\tif (!isLast) {\r\n\t\t\t\t\t\t\tcodeSnippet += ',';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresult.add({ type: 'property', label: name, codeSnippet: codeSnippet, documentationLabel: '' });\r\n\t\t\t\t});\r\n\t\t\t\tresult.setAsIncomplete();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic collectValueSuggestions(resource: URI, location: JSONLocation, currentKey: string, result: JSONWorker.ISuggestionsCollector): WinJS.Promise {\r\n\t\tif (this.isPackageJSONFile(resource) && (location.matches(['dependencies']) || location.matches(['devDependencies']) || location.matches(['optionalDependencies']) || location.matches(['peerDependencies']))) {\r\n\t\t\tvar queryUrl = 'http://registry.npmjs.org/' + encodeURIComponent(currentKey) + '/latest';\r\n\r\n\t\t\treturn this.requestService.makeRequest({\r\n\t\t\t\turl : queryUrl\r\n\t\t\t}).then((success) => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tvar obj = JSON.parse(success.responseText);\r\n\t\t\t\t\tif (obj && obj.version) {\r\n\t\t\t\t\t\tvar version = obj.version;\r\n\t\t\t\t\t\tvar name = JSON.stringify(version);\r\n\t\t\t\t\t\tresult.add({ type: 'class', label: name, codeSnippet: name, documentationLabel: nls.localize('json.npm.latestversion', 'The currently latest version of the package') });\r\n\t\t\t\t\t\tname = JSON.stringify('^' + version);\r\n\t\t\t\t\t\tresult.add({ type: 'class', label: name, codeSnippet: name, documentationLabel: nls.localize('json.npm.majorversion', 'Matches the most recent major version (1.x.x)') });\r\n\t\t\t\t\t\tname = JSON.stringify('~' + version);\r\n\t\t\t\t\t\tresult.add({ type: 'class', label: name, codeSnippet: name, documentationLabel: nls.localize('json.npm.minorversion', 'Matches the most recent minor version (1.2.x)') });\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t// ignore\r\n\t\t\t\t}\r\n\t\t\t\treturn 0;\r\n\t\t\t}, (error) => {\r\n\t\t\t\treturn 0;\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic getInfoContribution(resource: URI, location: JSONLocation): WinJS.TPromise<HtmlContent.IHTMLContentElement[]> {\r\n\t\tif (this.isPackageJSONFile(resource) && (location.matches(['dependencies', '*']) || location.matches(['devDependencies', '*']) || location.matches(['optionalDependencies', '*']) || location.matches(['peerDependencies', '*']))) {\r\n\t\t\tvar pack = location.getSegments()[location.getSegments().length - 1];\r\n\r\n\t\t\tvar htmlContent : HtmlContent.IHTMLContentElement[] = [];\r\n\t\t\thtmlContent.push({className: 'type', text: nls.localize('json.npm.package.hover', '{0}', pack) });\r\n\r\n\t\t\tvar queryUrl = 'http://registry.npmjs.org/' + encodeURIComponent(pack) + '/latest';\r\n\r\n\t\t\treturn this.requestService.makeRequest({\r\n\t\t\t\turl : queryUrl\r\n\t\t\t}).then((success) => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tvar obj = JSON.parse(success.responseText);\r\n\t\t\t\t\tif (obj) {\r\n\t\t\t\t\t\tif (obj.description) {\r\n\t\t\t\t\t\t\thtmlContent.push({className: 'documentation', text: obj.description });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (obj.version) {\r\n\t\t\t\t\t\t\thtmlContent.push({className: 'documentation', text: nls.localize('json.npm.version.hover', 'Latest version: {0}', obj.version) });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t// ignore\r\n\t\t\t\t}\r\n\t\t\t\treturn htmlContent;\r\n\t\t\t}, (error) => {\r\n\t\t\t\treturn htmlContent;\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n}","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\n\r\nimport HtmlContent = require('vs/base/common/htmlContent');\r\nimport Strings = require('vs/base/common/strings');\r\nimport WinJS = require('vs/base/common/winjs.base');\r\nimport nls = require('vs/nls');\r\nimport JSONWorker = require('vs/languages/json/common/jsonWorker');\r\nimport {IRequestService} from 'vs/platform/request/common/request';\r\nimport {JSONLocation} from 'vs/languages/json/common/parser/jsonLocation';\r\nimport URI from 'vs/base/common/uri';\r\n\r\nvar LIMIT = 40;\r\n\r\nexport class ProjectJSONContribution implements JSONWorker.IJSONWorkerContribution {\r\n\r\n\tprivate requestService : IRequestService;\r\n\r\n\tpublic constructor(@IRequestService requestService: IRequestService) {\r\n\t\tthis.requestService = requestService;\r\n\t}\r\n\r\n\tprivate isProjectJSONFile(resource: URI): boolean {\r\n\t\tvar path = resource.path;\r\n\t\treturn Strings.endsWith(path, '/project.json');\r\n\t}\r\n\r\n\tpublic collectDefaultSuggestions(resource: URI, result: JSONWorker.ISuggestionsCollector): WinJS.Promise {\r\n\t\tif (this.isProjectJSONFile(resource)) {\r\n\t\t\tvar defaultValue = {\r\n\t\t\t\t'version': '{{1.0.0-*}}',\r\n\t\t\t\t'dependencies': {},\r\n\t\t\t\t'frameworks': {\r\n\t\t\t\t\t'dnx451': {},\r\n\t\t\t\t\t'dnxcore50': {}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tresult.add({ type: 'snippet', label: nls.localize('json.project.default', 'Default project.json'), codeSnippet: JSON.stringify(defaultValue, null, '\\t'), documentationLabel: '' });\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic collectPropertySuggestions(resource: URI, location: JSONLocation, currentWord: string, addValue: boolean, isLast:boolean, result: JSONWorker.ISuggestionsCollector) : WinJS.Promise {\r\n\t\tif (this.isProjectJSONFile(resource) && (location.matches(['dependencies']) || location.matches(['frameworks', '*', 'dependencies']) || location.matches(['frameworks', '*', 'frameworkAssemblies']))) {\r\n\t\t\tvar queryUrl : string;\r\n\t\t\tif (currentWord.length > 0) {\r\n\t\t\t\tqueryUrl = 'https://www.nuget.org/api/v2/Packages?'\r\n\t\t\t\t\t+ '$filter=Id%20ge%20\\''\r\n\t\t\t\t\t+ encodeURIComponent(currentWord)\r\n\t\t\t\t\t+ '\\'%20and%20Id%20lt%20\\''\r\n\t\t\t\t\t+ encodeURIComponent(currentWord + 'z')\r\n\t\t\t\t\t+ '\\'%20and%20IsAbsoluteLatestVersion%20eq%20true'\r\n\t\t\t\t\t+ '&$select=Id,Version,Description&$format=json&$top=' + LIMIT;\r\n\t\t\t} else {\r\n\t\t\t\tqueryUrl = 'https://www.nuget.org/api/v2/Packages?'\r\n\t\t\t\t\t+ '$filter=IsAbsoluteLatestVersion%20eq%20true'\r\n\t\t\t\t\t+ '&$orderby=DownloadCount%20desc&$top=' + LIMIT\r\n\t\t\t\t\t+ '&$select=Id,Version,DownloadCount,Description&$format=json';\r\n\t\t\t}\r\n\r\n\t\t\treturn this.requestService.makeRequest({\r\n\t\t\t\turl : queryUrl\r\n\t\t\t}).then((success) => {\r\n\t\t\t\tif (success.status === 200) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tvar obj = JSON.parse(success.responseText);\r\n\t\t\t\t\t\tif (Array.isArray(obj.d)) {\r\n\t\t\t\t\t\t\tvar results = <any[]> obj.d;\r\n\t\t\t\t\t\t\tfor (var i = 0; i < results.length; i++) {\r\n\t\t\t\t\t\t\t\tvar curr = results[i];\r\n\t\t\t\t\t\t\t\tvar name = curr.Id;\r\n\t\t\t\t\t\t\t\tvar version = curr.Version;\r\n\t\t\t\t\t\t\t\tif (name) {\r\n\t\t\t\t\t\t\t\t\tvar documentation = curr.Description;\r\n\t\t\t\t\t\t\t\t\tvar typeLabel = curr.Version;\r\n\t\t\t\t\t\t\t\t\tvar codeSnippet = JSON.stringify(name);\r\n\t\t\t\t\t\t\t\t\tif (addValue) {\r\n\t\t\t\t\t\t\t\t\t\tcodeSnippet += ': \"{{' + version + '}}\"';\r\n\t\t\t\t\t\t\t\t\t\tif (!isLast) {\r\n\t\t\t\t\t\t\t\t\t\t\tcodeSnippet += ',';\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tresult.add({ type: 'property', label: name, codeSnippet: codeSnippet, typeLabel: typeLabel, documentationLabel: documentation });\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (results.length === LIMIT) {\r\n\t\t\t\t\t\t\t\tresult.setAsIncomplete();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t// ignore\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.error(nls.localize('json.nugget.error.repoaccess', 'Request to the nuget repository failed: {0}', success.responseText));\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t}, (error) => {\r\n\t\t\t\tresult.error(nls.localize('json.nugget.error.repoaccess', 'Request to the nuget repository failed: {0}', error.responseText));\r\n\t\t\t\treturn 0;\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic collectValueSuggestions(resource: URI, location: JSONLocation, currentKey: string, result: JSONWorker.ISuggestionsCollector): WinJS.Promise {\r\n\t\tif (this.isProjectJSONFile(resource) && (location.matches(['dependencies']) || location.matches(['frameworks', '*', 'dependencies']) || location.matches(['frameworks', '*', 'frameworkAssemblies']))) {\r\n\t\t\tvar queryUrl = 'https://www.myget.org/F/aspnetrelease/api/v2/Packages?'\r\n\t\t\t\t\t+ '$filter=Id%20eq%20\\''\r\n\t\t\t\t\t+ encodeURIComponent(currentKey)\r\n\t\t\t\t\t+ '\\'&$select=Version,IsAbsoluteLatestVersion&$format=json&$top=' + LIMIT;\r\n\r\n\t\t\treturn this.requestService.makeRequest({\r\n\t\t\t\turl : queryUrl\r\n\t\t\t}).then((success) => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tvar obj = JSON.parse(success.responseText);\r\n\t\t\t\t\tif (Array.isArray(obj.d)) {\r\n\t\t\t\t\t\tvar results = <any[]> obj.d;\r\n\t\t\t\t\t\tfor (var i = 0; i < results.length; i++) {\r\n\t\t\t\t\t\t\tvar curr = results[i];\r\n\t\t\t\t\t\t\tvar version = curr.Version;\r\n\t\t\t\t\t\t\tif (version) {\r\n\t\t\t\t\t\t\t\tvar name = JSON.stringify(version);\r\n\t\t\t\t\t\t\t\tvar isLatest = curr.IsAbsoluteLatestVersion === 'true';\r\n\t\t\t\t\t\t\t\tvar label = name;\r\n\t\t\t\t\t\t\t\tvar documentationLabel = '';\r\n\t\t\t\t\t\t\t\tif (isLatest) {\r\n\t\t\t\t\t\t\t\t\tdocumentationLabel = nls.localize('json.nugget.versiondescription.suggest', 'The currently latest version of the package');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tresult.add({ type: 'class', label: label, codeSnippet: name, documentationLabel: documentationLabel });\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (results.length === LIMIT) {\r\n\t\t\t\t\t\t\tresult.setAsIncomplete();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t// ignore\r\n\t\t\t\t}\r\n\t\t\t\treturn 0;\r\n\t\t\t}, (error) => {\r\n\t\t\t\treturn 0;\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic getInfoContribution(resource: URI, location: JSONLocation): WinJS.TPromise<HtmlContent.IHTMLContentElement[]> {\r\n\t\tif (this.isProjectJSONFile(resource) && (location.matches(['dependencies', '*']) || location.matches(['frameworks', '*', 'dependencies', '*']) || location.matches(['frameworks', '*', 'frameworkAssemblies', '*']))) {\r\n\t\t\tvar pack = location.getSegments()[location.getSegments().length - 1];\r\n\r\n\t\t\tvar htmlContent : HtmlContent.IHTMLContentElement[] = [];\r\n\t\t\thtmlContent.push({className: 'type', text: nls.localize('json.nugget.package.hover', '{0}', pack) });\r\n\r\n\t\t\tvar queryUrl = 'https://www.myget.org/F/aspnetrelease/api/v2/Packages?'\r\n\t\t\t\t+ '$filter=Id%20eq%20\\''\r\n\t\t\t\t+ encodeURIComponent(pack)\r\n\t\t\t\t+ '\\'%20and%20IsAbsoluteLatestVersion%20eq%20true'\r\n\t\t\t\t+ '&$select=Version,Description&$format=json&$top=5';\r\n\r\n\t\t\treturn this.requestService.makeRequest({\r\n\t\t\t\turl : queryUrl\r\n\t\t\t}).then((success) => {\r\n\t\t\t\tvar content = success.responseText;\r\n\t\t\t\tif (content) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tvar obj = JSON.parse(content);\r\n\t\t\t\t\t\tif (obj.d && obj.d[0]) {\r\n\t\t\t\t\t\t\tvar res = obj.d[0];\r\n\t\t\t\t\t\t\tif (res.Description) {\r\n\t\t\t\t\t\t\t\thtmlContent.push({className: 'documentation', text: res.Description });\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (res.Version) {\r\n\t\t\t\t\t\t\t\thtmlContent.push({className: 'documentation', text: nls.localize('json.nugget.version.hover', 'Latest version: {0}', res.Version) });\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t// ignore\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn htmlContent;\r\n\t\t\t}, (error) => {\r\n\t\t\t\treturn htmlContent;\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n}","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n\r\n'use strict';\r\n\r\nimport nls = require('vs/nls');\r\nimport Objects = require('vs/base/common/objects');\r\nimport Json = require('vs/base/common/json');\r\nimport http = require('vs/base/common/http');\r\nimport {IJSONSchema, IJSONSchemaMap} from 'vs/base/common/jsonSchema';\r\nimport Strings = require('vs/base/common/strings');\r\nimport URI from 'vs/base/common/uri';\r\nimport Types = require('vs/base/common/types');\r\nimport Parser = require('vs/languages/json/common/parser/jsonParser');\r\nimport WinJS = require('vs/base/common/winjs.base');\r\nimport {IResourceService, ResourceEvents, IResourceChangedEvent} from 'vs/editor/common/services/resourceService';\r\nimport {IRequestService} from 'vs/platform/request/common/request';\r\nimport {IWorkspaceContextService} from 'vs/platform/workspace/common/workspace';\r\nimport {ISchemaContributions} from 'vs/platform/jsonschemas/common/jsonContributionRegistry';\r\nimport {IDisposable, dispose} from 'vs/base/common/lifecycle';\r\n\r\nexport interface IJSONSchemaService {\r\n\r\n\t/**\r\n\t * Registers a schema file in the current workspace to be applicable to files that match the pattern\r\n\t */\r\n\tregisterExternalSchema(uri:string, filePatterns?: string[], unresolvedSchema?: IJSONSchema):ISchemaHandle;\r\n\r\n\t/**\r\n\t * Clears all cached schema files\r\n\t */\r\n\tclearExternalSchemas():void;\r\n\r\n\t/**\r\n\t * Registers contributed schemas\r\n\t */\r\n\tsetSchemaContributions(schemaContributions:ISchemaContributions):void;\r\n\r\n\t/**\r\n\t * Looks up the appropriate schema for the given URI\r\n\t */\r\n\tgetSchemaForResource(resource:string, document: Parser.JSONDocument):WinJS.TPromise<ResolvedSchema>;\r\n}\r\n\r\nexport interface ISchemaHandle {\r\n\t/**\r\n\t * The schema id\r\n\t */\r\n\turl: string;\r\n\r\n\t/**\r\n\t * The schema from the file, with potential $ref references\r\n\t */\r\n\tgetUnresolvedSchema():WinJS.TPromise<UnresolvedSchema>;\r\n\r\n\t/**\r\n\t * The schema from the file, with references resolved\r\n\t */\r\n\tgetResolvedSchema():WinJS.TPromise<ResolvedSchema>;\r\n}\r\n\r\n\r\ninterface InlineReferencePointer {\r\n\tparent: any;\r\n\tkey: any;\r\n\tvalue: any;\r\n}\r\n\r\nclass FilePatternAssociation {\r\n\r\n\tprivate schemas: string[];\r\n\tprivate combinedSchemaId: string;\r\n\tprivate patternRegExp: RegExp;\r\n\tprivate combinedSchema: ISchemaHandle;\r\n\r\n\tconstructor(pattern: string) {\r\n\t\tthis.combinedSchemaId = 'local://combinedSchema/' + encodeURIComponent(pattern);\r\n\t\ttry {\r\n\t\t\tthis.patternRegExp = new RegExp(Strings.convertSimple2RegExpPattern(pattern) + '$');\r\n\t\t} catch (e) {\r\n\t\t\t// invalid pattern\r\n\t\t\tthis.patternRegExp = null;\r\n\t\t}\r\n\t\tthis.schemas = [];\r\n\t\tthis.combinedSchema = null;\r\n\t}\r\n\r\n\tpublic addSchema(id: string) {\r\n\t\tthis.schemas.push(id);\r\n\t\tthis.combinedSchema = null;\r\n\t}\r\n\r\n\tpublic matchesPattern(fileName: string) : boolean {\r\n\t\treturn this.patternRegExp && this.patternRegExp.test(fileName);\r\n\t}\r\n\r\n\tpublic getCombinedSchema(service: JSONSchemaService) : ISchemaHandle {\r\n\t\tif (!this.combinedSchema) {\r\n\t\t\tthis.combinedSchema = service.createCombinedSchema(this.combinedSchemaId, this.schemas);\r\n\t\t}\r\n\t\treturn this.combinedSchema;\r\n\t}\r\n}\r\n\r\nclass SchemaHandle implements ISchemaHandle {\r\n\r\n\tpublic url: string;\r\n\r\n\tprivate resolvedSchema: WinJS.TPromise<ResolvedSchema>;\r\n\tprivate unresolvedSchema: WinJS.TPromise<UnresolvedSchema>;\r\n\tprivate service: JSONSchemaService;\r\n\r\n\tconstructor(service: JSONSchemaService, url:string, unresolvedSchemaContent?: IJSONSchema) {\r\n\t\tthis.service = service;\r\n\t\tthis.url = url;\r\n\t\tif (unresolvedSchemaContent) {\r\n\t\t\tthis.unresolvedSchema = WinJS.TPromise.as(new UnresolvedSchema(unresolvedSchemaContent));\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getUnresolvedSchema():WinJS.TPromise<UnresolvedSchema> {\r\n\t\tif (!this.unresolvedSchema) {\r\n\t\t\tthis.unresolvedSchema = this.service.loadSchema(this.url);\r\n\t\t}\r\n\t\treturn this.unresolvedSchema;\r\n\t}\r\n\r\n\tpublic getResolvedSchema():WinJS.TPromise<ResolvedSchema> {\r\n\t\tif (!this.resolvedSchema) {\r\n\t\t\tthis.resolvedSchema = this.getUnresolvedSchema().then(unresolved => {\r\n\t\t\t\treturn this.service.resolveSchemaContent(unresolved);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn this.resolvedSchema;\r\n\t}\r\n\r\n\tpublic clearSchema() : void {\r\n\t\tthis.resolvedSchema = null;\r\n\t\tthis.unresolvedSchema = null;\r\n\t}\r\n}\r\n\r\nexport class UnresolvedSchema {\r\n\tpublic schema: IJSONSchema;\r\n\tpublic errors: string[];\r\n\r\n\tconstructor(schema: IJSONSchema, errors: string[] = []) {\r\n\t\tthis.schema = schema;\r\n\t\tthis.errors = errors;\r\n\t}\r\n}\r\n\r\nexport class ResolvedSchema {\r\n\tpublic schema: IJSONSchema;\r\n\tpublic errors: string[];\r\n\r\n\tconstructor(schema: IJSONSchema, errors: string[] = []) {\r\n\t\tthis.schema = schema;\r\n\t\tthis.errors = errors;\r\n\t}\r\n\r\n\tpublic getSection(path: string[]): IJSONSchema {\r\n\t\treturn this.getSectionRecursive(path, this.schema);\r\n\t}\r\n\r\n\tprivate getSectionRecursive(path: string[], schema: IJSONSchema): IJSONSchema {\r\n\t\tif (!schema || path.length === 0) {\r\n\t\t\treturn schema;\r\n\t\t}\r\n\t\tvar next = path.shift();\r\n\r\n\t\tif (schema.properties && schema.properties[next]) {\r\n\t\t\treturn this.getSectionRecursive(path, schema.properties[next]);\r\n\t\t} else if (Types.isObject(schema.patternProperties)) {\r\n\t\t\tObject.keys(schema.patternProperties).forEach((pattern) => {\r\n\t\t\t\tvar regex = new RegExp(pattern);\r\n\t\t\t\tif (regex.test(next)) {\r\n\t\t\t\t\treturn this.getSectionRecursive(path, schema.patternProperties[pattern]);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else if (Types.isObject(schema.additionalProperties)) {\r\n\t\t\treturn this.getSectionRecursive(path, schema.additionalProperties);\r\n\t\t} else if (next.match('[0-9]+')) {\r\n\t\t\tif (Types.isObject(schema.items)) {\r\n\t\t\t\treturn this.getSectionRecursive(path, schema.items);\r\n\t\t\t} else if (Array.isArray(schema.items)) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tvar index = parseInt(next, 10);\r\n\t\t\t\t\tif (schema.items[index]) {\r\n\t\t\t\t\t\treturn this.getSectionRecursive(path, schema.items[index]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t\tcatch (e) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nexport class JSONSchemaService implements IJSONSchemaService {\r\n\r\n\tprivate contributionSchemas:{ [id:string]:SchemaHandle };\r\n\tprivate contributionAssociations:{ [id:string]:string[] };\r\n\r\n\tprivate schemasById: { [id:string]:SchemaHandle };\r\n\tprivate filePatternAssociations: FilePatternAssociation[];\r\n\tprivate filePatternAssociationById: { [id:string]: FilePatternAssociation };\r\n\r\n\tprivate requestService: IRequestService;\r\n\tprivate contextService : IWorkspaceContextService;\r\n\tprivate callOnDispose:IDisposable[];\r\n\r\n\tconstructor(@IRequestService requestService: IRequestService,\r\n\t\t@IWorkspaceContextService contextService?: IWorkspaceContextService,\r\n\t\t@IResourceService resourceService?: IResourceService) {\r\n\t\tthis.requestService = requestService;\r\n\t\tthis.contextService = contextService;\r\n\t\tthis.callOnDispose = [];\r\n\r\n\t\tif (resourceService) {\r\n\t\t\tthis.callOnDispose.push(resourceService.addListener2_(ResourceEvents.CHANGED, (e: IResourceChangedEvent) => this.onResourceChange(e)));\r\n\t\t}\r\n\r\n\t\tthis.contributionSchemas = {};\r\n\t\tthis.contributionAssociations = {};\r\n\t\tthis.schemasById = {};\r\n\t\tthis.filePatternAssociations = [];\r\n\t\tthis.filePatternAssociationById = {};\r\n\t}\r\n\r\n\tpublic dispose(): void {\r\n\t\tthis.callOnDispose = dispose(this.callOnDispose);\r\n\t}\r\n\r\n\tprivate onResourceChange(e: IResourceChangedEvent): void {\r\n\t\tvar url = e.url.toString();\r\n\t\tvar schemaFile = this.schemasById[url];\r\n\t\tif (schemaFile) {\r\n\t\t\tschemaFile.clearSchema();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate normalizeId(id: string) {\r\n\t\tif (id.length > 0 && id.charAt(id.length - 1) === '#') {\r\n\t\t\treturn id.substring(0, id.length - 1);\r\n\t\t}\r\n\t\treturn id;\r\n\t}\r\n\r\n\tpublic setSchemaContributions(schemaContributions: ISchemaContributions): void {\r\n\t\tif (schemaContributions.schemas) {\r\n\t\t\tvar schemas = schemaContributions.schemas;\r\n\t\t\tfor (let id in schemas) {\r\n\t\t\t\tid = this.normalizeId(id);\r\n\t\t\t\tthis.contributionSchemas[id] = this.addSchemaHandle(id, schemas[id]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate addSchemaHandle(id:string, unresolvedSchemaContent?: IJSONSchema) : SchemaHandle {\r\n\t\tvar schemaHandle = new SchemaHandle(this, id, unresolvedSchemaContent);\r\n\t\tthis.schemasById[id] = schemaHandle;\r\n\t\treturn schemaHandle;\r\n\t}\r\n\r\n\tprivate getOrAddSchemaHandle(id:string, unresolvedSchemaContent?: IJSONSchema) : ISchemaHandle {\r\n\t\treturn this.schemasById[id] || this.addSchemaHandle(id, unresolvedSchemaContent);\r\n\t}\r\n\r\n\tprivate getOrAddFilePatternAssociation(pattern: string) {\r\n\t\tvar fpa = this.filePatternAssociationById[pattern];\r\n\t\tif (!fpa) {\r\n\t\t\tfpa = new FilePatternAssociation(pattern);\r\n\t\t\tthis.filePatternAssociationById[pattern] = fpa;\r\n\t\t\tthis.filePatternAssociations.push(fpa);\r\n\t\t}\r\n\t\treturn fpa;\r\n\t}\r\n\r\n\tpublic registerExternalSchema(uri:string, filePatterns: string[] = null, unresolvedSchemaContent?: IJSONSchema) : ISchemaHandle {\r\n\t\tvar id = this.normalizeId(uri);\r\n\r\n\t\tif (filePatterns) {\r\n\t\t\tfilePatterns.forEach(pattern => {\r\n\t\t\t\tthis.getOrAddFilePatternAssociation(pattern).addSchema(uri);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn unresolvedSchemaContent ? this.addSchemaHandle(id, unresolvedSchemaContent) : this.getOrAddSchemaHandle(id);\r\n\t}\r\n\r\n\tpublic clearExternalSchemas():void {\r\n\t\tthis.schemasById = {};\r\n\t\tthis.filePatternAssociations = [];\r\n\t\tthis.filePatternAssociationById = {};\r\n\r\n\t\tfor (var id in this.contributionSchemas) {\r\n\t\t\tthis.schemasById[id] = this.contributionSchemas[id];\r\n\t\t}\r\n\t\tfor (var pattern in this.contributionAssociations) {\r\n\t\t\tvar fpa = this.getOrAddFilePatternAssociation(pattern);\r\n\r\n\t\t\tthis.contributionAssociations[pattern].forEach(schemaId => {\r\n\t\t\t\tvar id = this.normalizeId(schemaId);\r\n\t\t\t\tfpa.addSchema(id);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getResolvedSchema(schemaId:string): WinJS.TPromise<ResolvedSchema> {\r\n\t\tvar id = this.normalizeId(schemaId);\r\n\t\tvar schemaHandle = this.schemasById[id];\r\n\t\tif (schemaHandle) {\r\n\t\t\treturn schemaHandle.getResolvedSchema();\r\n\t\t}\r\n\t\treturn WinJS.TPromise.as(null);\r\n\t}\r\n\r\n\tpublic loadSchema(url:string) : WinJS.TPromise<UnresolvedSchema> {\r\n\t\treturn this.requestService.makeRequest({ url: url }).then(\r\n\t\t\trequest => {\r\n\t\t\t\tvar content = request.responseText;\r\n\t\t\t\tif (!content) {\r\n\t\t\t\t\tvar errorMessage = nls.localize('json.schema.nocontent', 'Unable to load schema from \\'{0}\\': No content.', toDisplayString(url));\r\n\t\t\t\t\treturn new UnresolvedSchema(<IJSONSchema> {}, [ errorMessage ]);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar schemaContent: IJSONSchema = {};\r\n\t\t\t\tvar jsonErrors: Json.ParseError[] = [];\r\n\t\t\t\tschemaContent = Json.parse(content, jsonErrors);\r\n\t\t\t\tvar errors = jsonErrors.length ? [ nls.localize('json.schema.invalidFormat', 'Unable to parse content from \\'{0}\\': {1}.', toDisplayString(url), Json.getParseErrorMessage(jsonErrors[0].error))] : [];\r\n\t\t\t\treturn new UnresolvedSchema(schemaContent, errors);\r\n\t\t\t},\r\n\t\t\t(error : http.IXHRResponse) => {\r\n\t\t\t\tvar errorMessage = nls.localize('json.schema.unabletoload', 'Unable to load schema from \\'{0}\\': {1}', toDisplayString(url), error.responseText || http.getErrorStatusDescription(error.status) || error.toString());\r\n\t\t\t\treturn new UnresolvedSchema(<IJSONSchema> {}, [ errorMessage ]);\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tpublic resolveSchemaContent(schemaToResolve: UnresolvedSchema): WinJS.TPromise<ResolvedSchema> {\r\n\r\n\t\tvar resolveErrors : string[] = schemaToResolve.errors.slice(0);\r\n\t\tvar schema = schemaToResolve.schema;\r\n\r\n\t\tvar findSection = (schema: IJSONSchema, path: string): any => {\r\n\t\t\tif (!path) {\r\n\t\t\t\treturn schema;\r\n\t\t\t}\r\n\t\t\tvar current: any = schema;\r\n\t\t\tpath.substr(1).split('/').some((part) => {\r\n\t\t\t\tcurrent = current[part];\r\n\t\t\t\treturn !current;\r\n\t\t\t});\r\n\t\t\treturn current;\r\n\t\t};\r\n\r\n\t\tvar resolveLink = (node: any, linkedSchema: IJSONSchema, linkPath: string): void => {\r\n\t\t\tvar section = findSection(linkedSchema, linkPath);\r\n\t\t\tif (typeof section === 'object') {\r\n\t\t\t\tObjects.mixin(node, section, false);\r\n\t\t\t} else {\r\n\t\t\t\tresolveErrors.push(nls.localize('json.schema.invalidref', '$ref \\'{0}\\' in {1} can not be resolved.', linkPath, linkedSchema.id));\r\n\t\t\t}\r\n\t\t\tdelete node.$ref;\r\n\t\t};\r\n\r\n\t\tvar resolveExternalLink = (node: any, uri: string, linkPath: string): WinJS.Promise => {\r\n\t\t\treturn this.getOrAddSchemaHandle(uri).getUnresolvedSchema().then(unresolvedSchema => {\r\n\t\t\t\tif (unresolvedSchema.errors.length) {\r\n\t\t\t\t\tvar loc = linkPath ? uri + '#' + linkPath : uri;\r\n\t\t\t\t\tresolveErrors.push(nls.localize('json.schema.problemloadingref', 'Problems loading reference \\'{0}\\': {1}', loc, unresolvedSchema.errors[0]));\r\n\t\t\t\t}\r\n\t\t\t\tresolveLink(node, unresolvedSchema.schema, linkPath);\r\n\t\t\t\treturn resolveRefs(node, unresolvedSchema.schema);\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tlet resolveRefs = (node: IJSONSchema, parentSchema: IJSONSchema): WinJS.Promise => {\r\n\t\t\tlet toWalk : IJSONSchema[] = [node];\r\n\t\t\tlet seen: IJSONSchema[] = [];\r\n\r\n\t\t\tvar openPromises: WinJS.Promise[] = [];\r\n\r\n\t\t\tlet collectEntries = (...entries: IJSONSchema[]) => {\r\n\t\t\t\tfor (let entry of entries) {\r\n\t\t\t\t\tif (typeof entry === 'object') {\r\n\t\t\t\t\t\ttoWalk.push(entry);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tlet collectMapEntries = (...maps: IJSONSchemaMap[]) => {\r\n\t\t\t\tfor (let map of maps) {\r\n\t\t\t\t\tif (typeof map === 'object') {\r\n\t\t\t\t\t\tfor (let key in map) {\r\n\t\t\t\t\t\t\tlet entry = map[key];\r\n\t\t\t\t\t\t\ttoWalk.push(entry);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tlet collectArrayEntries = (...arrays: IJSONSchema[][]) => {\r\n\t\t\t\tfor (let array of arrays) {\r\n\t\t\t\t\tif (Array.isArray(array)) {\r\n\t\t\t\t\t\ttoWalk.push.apply(toWalk, array);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\twhile (toWalk.length) {\r\n\t\t\t\tlet next = toWalk.pop();\r\n\t\t\t\tif (seen.indexOf(next) >= 0) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tseen.push(next);\r\n\t\t\t\tif (next.$ref) {\r\n\t\t\t\t\tlet segments = next.$ref.split('#', 2);\r\n\t\t\t\t\tif (segments[0].length > 0) {\r\n\t\t\t\t\t\topenPromises.push(resolveExternalLink(next, segments[0], segments[1]));\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresolveLink(next, parentSchema, segments[1]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcollectEntries(next.items, next.additionalProperties, next.not);\r\n\t\t\t\tcollectMapEntries(next.definitions, next.properties, next.patternProperties, <IJSONSchemaMap> next.dependencies);\r\n\t\t\t\tcollectArrayEntries(next.anyOf, next.allOf, next.oneOf, <IJSONSchema[]> next.items);\r\n\t\t\t}\r\n\r\n\t\t\treturn WinJS.Promise.join(openPromises);\r\n\t\t};\r\n\r\n\t\treturn resolveRefs(schema, schema).then(_ => new ResolvedSchema(schema, resolveErrors));\r\n\t}\r\n\r\n\tpublic getSchemaForResource(resource: string, document: Parser.JSONDocument): WinJS.TPromise<ResolvedSchema> {\r\n\r\n\t\t// first use $schema if present\r\n\t\tif (document && document.root && document.root.type === 'object') {\r\n\t\t\tvar schemaProperties = (<Parser.ObjectASTNode> document.root).properties.filter((p) => (p.key.value === '$schema') && !!p.value);\r\n\t\t\tif (schemaProperties.length > 0) {\r\n\t\t\t\tvar schemeId = <string> schemaProperties[0].value.getValue();\r\n\t\t\t\tif (!Strings.startsWith(schemeId, 'http://') && !Strings.startsWith(schemeId, 'https://') && !Strings.startsWith(schemeId, 'file://')) {\r\n\t\t\t\t\tvar resourceURL = this.contextService.toResource(schemeId);\r\n\t\t\t\t\tif (resourceURL) {\r\n\t\t\t\t\t\tschemeId = resourceURL.toString();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (schemeId) {\r\n\t\t\t\t\tvar id = this.normalizeId(schemeId);\r\n\t\t\t\t\treturn this.getOrAddSchemaHandle(id).getResolvedSchema();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// then check for matching file names, last to first\r\n\t\tfor (var i= this.filePatternAssociations.length - 1; i >= 0 ; i--) {\r\n\t\t\tvar entry = this.filePatternAssociations[i];\r\n\t\t\tif (entry.matchesPattern(resource)) {\r\n\t\t\t\treturn entry.getCombinedSchema(this).getResolvedSchema();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn WinJS.TPromise.as(null);\r\n\t}\r\n\r\n\tpublic createCombinedSchema(combinedSchemaId: string, schemaIds: string[]) : ISchemaHandle {\r\n\t\tif (schemaIds.length === 1) {\r\n\t\t\treturn this.getOrAddSchemaHandle(schemaIds[0]);\r\n\t\t} else {\r\n\t\t\tvar combinedSchema: IJSONSchema = {\r\n\t\t\t\tallOf: schemaIds.map(schemaId => ({ $ref: schemaId }))\r\n\t\t\t};\r\n\t\t\treturn this.addSchemaHandle(combinedSchemaId, combinedSchema);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction toDisplayString(url:string) {\r\n\ttry {\r\n\t\tvar uri = URI.parse(url);\r\n\t\tif (uri.scheme === 'file') {\r\n\t\t\treturn uri.fsPath;\r\n\t\t}\r\n\t} catch (e) {\r\n\t\t// ignore\r\n\t}\r\n\treturn url;\r\n}","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\n\r\nimport URI from 'vs/base/common/uri';\r\nimport Severity from 'vs/base/common/severity';\r\nimport EditorCommon = require('vs/editor/common/editorCommon');\r\nimport Modes = require('vs/editor/common/modes');\r\nimport HtmlContent = require('vs/base/common/htmlContent');\r\nimport Parser = require('./parser/jsonParser');\r\nimport JSONFormatter = require('vs/base/common/jsonFormatter');\r\nimport SchemaService = require('./jsonSchemaService');\r\nimport JSONSchema = require('vs/base/common/jsonSchema');\r\nimport JSONIntellisense = require('./jsonIntellisense');\r\nimport WinJS = require('vs/base/common/winjs.base');\r\nimport Strings = require('vs/base/common/strings');\r\nimport ProjectJSONContribution = require('./contributions/projectJSONContribution');\r\nimport PackageJSONContribution = require('./contributions/packageJSONContribution');\r\nimport BowerJSONContribution = require('./contributions/bowerJSONContribution');\r\nimport GlobPatternContribution = require('./contributions/globPatternContribution');\r\nimport errors = require('vs/base/common/errors');\r\nimport {IMarkerService, IMarkerData} from 'vs/platform/markers/common/markers';\r\nimport {IRequestService} from 'vs/platform/request/common/request';\r\nimport {IWorkspaceContextService} from 'vs/platform/workspace/common/workspace';\r\nimport {ISchemaContributions} from 'vs/platform/jsonschemas/common/jsonContributionRegistry';\r\nimport {IResourceService} from 'vs/editor/common/services/resourceService';\r\nimport {IInstantiationService} from 'vs/platform/instantiation/common/instantiation';\r\nimport {JSONLocation} from './parser/jsonLocation';\r\nimport {filterSuggestions} from 'vs/editor/common/modes/supports/suggestSupport';\r\nimport {ValidationHelper} from 'vs/editor/common/worker/validationHelper';\r\n\r\nexport interface IOptionsSchema {\r\n\t/**\r\n\t * HTTP schema URL or a relative path to schema file in workspace\r\n\t */\r\n\turl: string;\r\n\t/**\r\n\t * The patterns (e.g. *.pack.json) to map files to this schema\r\n\t */\r\n\tfileMatch: string[];\r\n\t/**\r\n\t * A unresolved schema definition. Optional, to avoid fetching from a URL.\r\n\t */\r\n\tschema?: JSONSchema.IJSONSchema;\r\n\r\n\t/* deprecated */\r\n\tschemaPath: string;\r\n\t/* deprecated */\r\n\tfilePattern: string;\r\n}\r\n\r\nexport interface IOptions {\r\n\tschemas: IOptionsSchema[];\r\n}\r\n\r\nexport interface ISuggestionsCollector {\r\n\tadd(suggestion: Modes.ISuggestion): void;\r\n\tsetAsIncomplete() : void;\r\n\terror(message:string): void;\r\n}\r\n\r\nexport interface IJSONWorkerContribution {\r\n\tgetInfoContribution(resource: URI, location: JSONLocation) : WinJS.TPromise<HtmlContent.IHTMLContentElement[]>;\r\n\tcollectPropertySuggestions(resource: URI, location: JSONLocation, currentWord: string, addValue: boolean, isLast:boolean, result: ISuggestionsCollector) : WinJS.Promise;\r\n\tcollectValueSuggestions(resource: URI, location: JSONLocation, propertyKey: string, result: ISuggestionsCollector): WinJS.Promise;\r\n\tcollectDefaultSuggestions(resource: URI, result: ISuggestionsCollector): WinJS.Promise;\r\n}\r\n\r\nexport class JSONWorker {\r\n\r\n\tprivate schemaService: SchemaService.IJSONSchemaService;\r\n\tprivate requestService: IRequestService;\r\n\tprivate contextService: IWorkspaceContextService;\r\n\tprivate jsonIntellisense : JSONIntellisense.JSONIntellisense;\r\n\tprivate contributions: IJSONWorkerContribution[];\r\n\tprivate _validationHelper: ValidationHelper;\r\n\tprivate resourceService:IResourceService;\r\n\tprivate markerService: IMarkerService;\r\n\tprivate _modeId: string;\r\n\r\n\tconstructor(\r\n\t\tmodeId: string,\r\n\t\t@IResourceService resourceService: IResourceService,\r\n\t\t@IMarkerService markerService: IMarkerService,\r\n\t\t@IRequestService requestService: IRequestService,\r\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\r\n\t\t@IInstantiationService instantiationService: IInstantiationService\r\n\t) {\r\n\r\n\t\tthis._modeId = modeId;\r\n\t\tthis.resourceService = resourceService;\r\n\t\tthis.markerService = markerService;\r\n\r\n\t\tthis._validationHelper = new ValidationHelper(\r\n\t\t\tthis.resourceService,\r\n\t\t\tthis._modeId,\r\n\t\t\t(toValidate) => this.doValidate(toValidate)\r\n\t\t);\r\n\r\n\t\tthis.requestService = requestService;\r\n\t\tthis.contextService = contextService;\r\n\t\tthis.schemaService = instantiationService.createInstance(SchemaService.JSONSchemaService);\r\n\r\n\t\tthis.contributions = [\r\n\t\t\tinstantiationService.createInstance(ProjectJSONContribution.ProjectJSONContribution),\r\n\t\t\tinstantiationService.createInstance(PackageJSONContribution.PackageJSONContribution),\r\n\t\t\tinstantiationService.createInstance(BowerJSONContribution.BowerJSONContribution),\r\n\t\t\tinstantiationService.createInstance(GlobPatternContribution.GlobPatternContribution)\r\n\t\t];\r\n\r\n\t\tthis.jsonIntellisense = new JSONIntellisense.JSONIntellisense(this.schemaService, this.requestService, this.contributions);\r\n\t}\r\n\r\n\tpublic navigateValueSet(resource:URI, range:EditorCommon.IRange, up:boolean):WinJS.TPromise<Modes.IInplaceReplaceSupportResult> {\r\n\t\tvar modelMirror = this.resourceService.get(resource);\r\n\t\tvar offset = modelMirror.getOffsetFromPosition({ lineNumber: range.startLineNumber, column: range.startColumn });\r\n\r\n\t\tvar parser = new Parser.JSONParser();\r\n\t\tvar config = new Parser.JSONDocumentConfig();\r\n\t\tconfig.ignoreDanglingComma = true;\r\n\t\tvar doc = parser.parse(modelMirror.getValue(), config);\r\n\t\tvar node = doc.getNodeFromOffsetEndInclusive(offset);\r\n\r\n\t\tif (node && (node.type === 'string' || node.type === 'number' || node.type === 'boolean' || node.type === 'null')) {\r\n\t\t\treturn this.schemaService.getSchemaForResource(resource.toString(), doc).then((schema) => {\r\n\t\t\t\tif (schema) {\r\n\t\t\t\t\tvar proposals : Modes.ISuggestion[] = [];\r\n\t\t\t\t\tvar proposed: any = {};\r\n\t\t\t\t\tvar collector = {\r\n\t\t\t\t\t\tadd: (suggestion: Modes.ISuggestion) => {\r\n\t\t\t\t\t\t\tif (!proposed[suggestion.label]) {\r\n\t\t\t\t\t\t\t\tproposed[suggestion.label] = true;\r\n\t\t\t\t\t\t\t\tproposals.push(suggestion);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsetAsIncomplete: () => { /* ignore */ },\r\n\t\t\t\t\t\terror: (message: string) => {\r\n\t\t\t\t\t\t\terrors.onUnexpectedError(message);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tthis.jsonIntellisense.getValueSuggestions(resource, schema, doc, node.parent, node.start, collector);\r\n\r\n\t\t\t\t\tvar range = modelMirror.getRangeFromOffsetAndLength(node.start, node.end - node.start);\r\n\t\t\t\t\tvar text = modelMirror.getValueInRange(range);\r\n\t\t\t\t\tfor (var i = 0, len = proposals.length; i < len; i++) {\r\n\t\t\t\t\t\tif (Strings.equalsIgnoreCase(proposals[i].label, text)) {\r\n\t\t\t\t\t\t\tvar nextIdx = i;\r\n\t\t\t\t\t\t\tif (up) {\r\n\t\t\t\t\t\t\t\tnextIdx = (i + 1) % len;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tnextIdx =  i - 1;\r\n\t\t\t\t\t\t\t\tif (nextIdx < 0) {\r\n\t\t\t\t\t\t\t\t\tnextIdx = len - 1;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tvalue: proposals[nextIdx].label,\r\n\t\t\t\t\t\t\t\trange: range\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\t/**\r\n\t * @return true if you want to revalidate your models\r\n\t */\r\n\t_doConfigure(options:IOptions): WinJS.TPromise<void> {\r\n\t\tif (options && options.schemas) {\r\n\t\t\tthis.schemaService.clearExternalSchemas();\r\n\t\t\toptions.schemas.forEach((schema) => {\r\n\t\t\t\tif (schema.url && (schema.fileMatch || schema.schema)) {\r\n\t\t\t\t\tvar url = schema.url;\r\n\t\t\t\t\tif (!Strings.startsWith(url, 'http://') && !Strings.startsWith(url, 'https://') && !Strings.startsWith(url, 'file://')) {\r\n\t\t\t\t\t\tvar resourceURL = this.contextService.toResource(url);\r\n\t\t\t\t\t\tif (resourceURL) {\r\n\t\t\t\t\t\t\turl = resourceURL.toString();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (url) {\r\n\t\t\t\t\t\tthis.schemaService.registerExternalSchema(url, schema.fileMatch, schema.schema);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (schema.filePattern && schema.schemaPath) {\r\n\t\t\t\t\tvar url = this.contextService.toResource(schema.schemaPath).toString();\r\n\t\t\t\t\tvar patterns = schema.filePattern ? [ schema.filePattern ] : [];\r\n\t\t\t\t\tthis.schemaService.registerExternalSchema(url, patterns);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis._validationHelper.triggerDueToConfigurationChange();\r\n\r\n\t\treturn WinJS.TPromise.as(void 0);\r\n\t}\r\n\r\n\tpublic setSchemaContributions(contributions:ISchemaContributions): WinJS.TPromise<boolean> {\r\n\t\tthis.schemaService.setSchemaContributions(contributions);\r\n\t\treturn WinJS.TPromise.as(true);\r\n\t}\r\n\r\n\tpublic enableValidator(): WinJS.TPromise<void> {\r\n\t\tthis._validationHelper.enable();\r\n\t\treturn WinJS.TPromise.as(null);\r\n\t}\r\n\r\n\tpublic doValidate(resources: URI[]):void {\r\n\t\tfor (var i = 0; i < resources.length; i++) {\r\n\t\t\tthis.doValidate1(resources[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate doValidate1(resource: URI):void {\r\n\t\tvar modelMirror = this.resourceService.get(resource);\r\n\t\tvar parser = new Parser.JSONParser();\r\n\t\tvar content = modelMirror.getValue();\r\n\r\n\t\tif (content.length === 0) {\r\n\t\t\t// ignore empty content, no marker can be set anyway\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar result = parser.parse(content);\r\n\t\tthis.schemaService.getSchemaForResource(resource.toString(), result).then((schema) => {\r\n\t\t\tif (schema) {\r\n\t\t\t\tif (schema.errors.length && result.root) {\r\n\t\t\t\t\tvar property = result.root.type === 'object' ? (<Parser.ObjectASTNode> result.root).getFirstProperty('$schema') : null;\r\n\t\t\t\t\tif (property) {\r\n\t\t\t\t\t\tvar node = property.value || property;\r\n\t\t\t\t\t\tresult.warnings.push({ location: { start: node.start, end: node.end }, message: schema.errors[0] });\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresult.warnings.push({ location: { start: result.root.start, end: result.root.start + 1 }, message: schema.errors[0] });\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.validate(schema.schema);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar added : { [signature:string]: boolean} = {};\r\n\t\t\tvar markerData: IMarkerData[] = [];\r\n\r\n\t\t\tresult.errors.concat(result.warnings).forEach((error, idx) => {\r\n\t\t\t\t// remove duplicated messages\r\n\t\t\t\tvar signature = error.location.start + ' ' + error.location.end + ' ' + error.message;\r\n\t\t\t\tif (!added[signature]) {\r\n\t\t\t\t\tadded[signature] = true;\r\n\t\t\t\t\tvar startPosition = modelMirror.getPositionFromOffset(error.location.start);\r\n\t\t\t\t\tvar endPosition = modelMirror.getPositionFromOffset(error.location.end);\r\n\t\t\t\t\tmarkerData.push({\r\n\t\t\t\t\t\tmessage: error.message,\r\n\t\t\t\t\t\tseverity: idx >= result.errors.length ? Severity.Warning : Severity.Error,\r\n\t\t\t\t\t\tstartLineNumber: startPosition.lineNumber,\r\n\t\t\t\t\t\tstartColumn: startPosition.column,\r\n\t\t\t\t\t\tendLineNumber: endPosition.lineNumber,\r\n\t\t\t\t\t\tendColumn: endPosition.column\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.markerService.changeOne(this._modeId, resource, markerData);\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tpublic provideCompletionItems(resource:URI, position:EditorCommon.IPosition):WinJS.TPromise<Modes.ISuggestResult[]> {\r\n\t\treturn this.doSuggest(resource, position).then(value => filterSuggestions(value));\r\n\t}\r\n\r\n\tprivate doSuggest(resource:URI, position:EditorCommon.IPosition):WinJS.TPromise<Modes.ISuggestResult> {\r\n\t\tvar modelMirror = this.resourceService.get(resource);\r\n\r\n\t\treturn this.jsonIntellisense.doSuggest(resource, modelMirror, position);\r\n\t}\r\n\r\n\tpublic provideHover(resource:URI, position:EditorCommon.IPosition): WinJS.TPromise<Modes.Hover> {\r\n\r\n\t\tvar modelMirror = this.resourceService.get(resource);\r\n\r\n\t\tvar parser = new Parser.JSONParser();\r\n\t\tvar doc = parser.parse(modelMirror.getValue());\r\n\r\n\t\tvar offset = modelMirror.getOffsetFromPosition(position);\r\n\t\tvar node = doc.getNodeFromOffset(offset);\r\n\t\tvar originalNode = node;\r\n\r\n\t\t// use the property description when hovering over an object key\r\n\t\tif (node && node.type === 'string') {\r\n\t\t\tvar stringNode = <Parser.StringASTNode>node;\r\n\t\t\tif (stringNode.isKey) {\r\n\t\t\t\tvar propertyNode = <Parser.PropertyASTNode>node.parent;\r\n\t\t\t\tnode = propertyNode.value;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!node) {\r\n\t\t\treturn WinJS.TPromise.as(null);\r\n\t\t}\r\n\r\n\t\treturn this.schemaService.getSchemaForResource(resource.toString(), doc).then((schema) => {\r\n\t\t\tif (schema) {\r\n\t\t\t\tvar matchingSchemas : Parser.IApplicableSchema[] = [];\r\n\t\t\t\tdoc.validate(schema.schema, matchingSchemas, node.start);\r\n\r\n\t\t\t\tvar description: string = null;\r\n\t\t\t\tvar contributonId: string = null;\r\n\t\t\t\tmatchingSchemas.every((s) => {\r\n\t\t\t\t\tif (s.node === node && !s.inverted && s.schema) {\r\n\t\t\t\t\t\tdescription = description || s.schema.description;\r\n\t\t\t\t\t\tcontributonId = contributonId || s.schema.id;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar location = node.getNodeLocation();\r\n\t\t\t\tfor (var i= this.contributions.length -1; i >= 0; i--) {\r\n\t\t\t\t\tvar contribution = this.contributions[i];\r\n\t\t\t\t\tvar promise = contribution.getInfoContribution(resource, location);\r\n\t\t\t\t\tif (promise) {\r\n\t\t\t\t\t\treturn promise.then((htmlContent) => { return this.createInfoResult(htmlContent, originalNode, modelMirror); } );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (description) {\r\n\t\t\t\t\tvar htmlContent = [ {className: 'documentation', text: description } ];\r\n\t\t\t\t\treturn this.createInfoResult(htmlContent, originalNode, modelMirror);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t});\r\n\t}\r\n\r\n\tprivate createInfoResult(htmlContent : HtmlContent.IHTMLContentElement[], node: Parser.ASTNode, modelMirror: EditorCommon.IMirrorModel) : Modes.Hover {\r\n\t\tvar range = modelMirror.getRangeFromOffsetAndLength(node.start, node.end - node.start);\r\n\r\n\t\tvar result:Modes.Hover = {\r\n\t\t\thtmlContent: htmlContent,\r\n\t\t\trange: range\r\n\t\t};\r\n\t\treturn result;\r\n\t}\r\n\r\n\r\n\tpublic provideDocumentSymbols(resource:URI):WinJS.TPromise<Modes.SymbolInformation[]> {\r\n\t\tvar modelMirror = this.resourceService.get(resource);\r\n\r\n\t\tvar parser = new Parser.JSONParser();\r\n\t\tvar doc = parser.parse(modelMirror.getValue());\r\n\t\tvar root = doc.root;\r\n\t\tif (!root) {\r\n\t\t\treturn WinJS.TPromise.as(null);\r\n\t\t}\r\n\r\n\t\t// special handling for key bindings\r\n\t\tvar resourceString = resource.toString();\r\n\t\tif ((resourceString === 'vscode://defaultsettings/keybindings.json') || Strings.endsWith(resourceString.toLowerCase(), '/user/keybindings.json')) {\r\n\t\t\tif (root.type === 'array') {\r\n\t\t\t\tvar result : Modes.SymbolInformation[] = [];\r\n\t\t\t\t(<Parser.ArrayASTNode> root).items.forEach((item) => {\r\n\t\t\t\t\tif (item.type === 'object') {\r\n\t\t\t\t\t\tvar property = (<Parser.ObjectASTNode> item).getFirstProperty('key');\r\n\t\t\t\t\t\tif (property && property.value) {\r\n\t\t\t\t\t\t\tvar range = modelMirror.getRangeFromOffsetAndLength(item.start, item.end - item.start);\r\n\t\t\t\t\t\t\tresult.push({\r\n\t\t\t\t\t\t\t\tname: property.value.getValue(),\r\n\t\t\t\t\t\t\t\tkind: Modes.SymbolKind.String,\r\n\t\t\t\t\t\t\t\tlocation: {\r\n\t\t\t\t\t\t\t\t\turi: resource,\r\n\t\t\t\t\t\t\t\t\trange: range\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn WinJS.TPromise.as(result);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction collectOutlineEntries(result: Modes.SymbolInformation[], node: Parser.ASTNode, containerName: string): Modes.SymbolInformation[] {\r\n\t\t\tif (node.type === 'array') {\r\n\t\t\t\t(<Parser.ArrayASTNode>node).items.forEach((node:Parser.ASTNode) => {\r\n\t\t\t\t\tcollectOutlineEntries(result, node, containerName);\r\n\t\t\t\t});\r\n\t\t\t} else if (node.type === 'object') {\r\n\t\t\t\tvar objectNode = <Parser.ObjectASTNode>node;\r\n\r\n\t\t\t\tobjectNode.properties.forEach((property:Parser.PropertyASTNode) => {\r\n\t\t\t\t\tvar range = modelMirror.getRangeFromOffsetAndLength(property.start, property.end - property.start);\r\n\t\t\t\t\tvar valueNode = property.value;\r\n\t\t\t\t\tif (valueNode) {\r\n\t\t\t\t\t\tlet childContainerName = containerName ? containerName + '.' + property.key.name : property.key.name;\r\n\t\t\t\t\t\tresult.push({\r\n\t\t\t\t\t\t\tname: property.key.getValue(),\r\n\t\t\t\t\t\t\tkind: getSymbolKind(valueNode.type),\r\n\t\t\t\t\t\t\tlocation: {\r\n\t\t\t\t\t\t\t\turi: resource,\r\n\t\t\t\t\t\t\t\trange: range,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tcontainerName: containerName\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tcollectOutlineEntries(result, valueNode, childContainerName);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tvar result = collectOutlineEntries([], root, void 0);\r\n\t\treturn WinJS.TPromise.as(result);\r\n\t}\r\n\r\n\tpublic format(resource: URI, range: EditorCommon.IRange, options: Modes.FormattingOptions): WinJS.TPromise<EditorCommon.ISingleEditOperation[]> {\r\n\t\tlet model = this.resourceService.get(resource);\r\n\t\tlet formatRange = range ? model.getOffsetAndLengthFromRange(range) : void 0;\r\n\t\tlet edits = JSONFormatter.format(model.getValue(), formatRange, { insertSpaces: options.insertSpaces, tabSize: options.tabSize, eol: model.getEOL() });\r\n\t\tlet operations = edits.map(e => ({ range: model.getRangeFromOffsetAndLength(e.offset, e.length), text: e.content }));\r\n\t\treturn WinJS.TPromise.as(operations);\r\n\t}\r\n}\r\n\r\nfunction getSymbolKind(nodeType: string): Modes.SymbolKind {\r\n\tswitch (nodeType) {\r\n\t\tcase 'object':\r\n\t\t\treturn Modes.SymbolKind.Module;\r\n\t\tcase 'string':\r\n\t\t\treturn Modes.SymbolKind.String;\r\n\t\tcase 'number':\r\n\t\t\treturn Modes.SymbolKind.Number;\r\n\t\tcase 'array':\r\n\t\t\treturn Modes.SymbolKind.Array;\r\n\t\tcase 'boolean':\r\n\t\t\treturn Modes.SymbolKind.Boolean;\r\n\t\tdefault: // 'null'\r\n\t\t\treturn Modes.SymbolKind.Variable;\r\n\t}\r\n}\r\n"]}